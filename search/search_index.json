{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Slap","text":"<p>Slap is a command-line tool to simplify common workflows in the development of Python projects independent of the PEP 517 build backend being used, capable of managing single- and multi-project repositories.</p>"},{"location":"#installation","title":"Installation","text":"<p>I recommend installing Slap using Pipx. (Requires Python 3.10 or higher)</p> <pre><code>$ pipx install slap-cli\n</code></pre> <p>Note: Currently Slap relies on an alpha version of <code>poetry-core</code> (<code>^1.1.0a6</code>). If you install it into the same environment as Poetry itself, you may also need to use an alpha version of Poetry (e.g. <code>1.2.0a2</code>).</p> <p>If you use Slap in GitHub Actions, try one of the actions provided by Slap directly:</p> <ul> <li><code>NiklasRosenstein/slap@gha/install/v1</code></li> <li><code>NiklasRosenstein/slap@gha/changelog/update/v1</code></li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<p>You can find the documentation for Slap here: https://niklasrosenstein.github.io/slap/</p> <p>Check out the Getting started guide.</p>"},{"location":"#feature-matrix","title":"Feature Matrix","text":"Feature Poetry Documentation Manage structured changelog entries \u274c slap changelog Show project details \u274c slap info Build and publish to PyPI using Twine \u2705 (single project only) slap publish Create a new release (bump version numbersr) \u274c (sub-par support) slap release Run a command configured in <code>pyproject.toml</code> \u274c slap run Run tests configured in <code>pyproject.toml</code> \u274c slap test Manage Python virtualenv's \u2705 (but out-of-worktree) slap venv Generate a dependencies report \u274c slap report dependencies Project dependencies lock file \u2705 \u274c Feature / Build backend Flit Poetry Setuptools Documentation Add dependency \u2705 \u2705 \u274c slap add Sanity check project configuration \u2705 slap check Bootstrap project files \u2705 slap init Install projects using Pip \u2705 \u2705 \u2705 slap install Symlink projects (editable installs) \u2705 \u2705 \u2705 slap link Bump interdependencies in mono-repository \u2705 (not tested regularly) \u2705 \u2705 (partial) slap release <p>Legend: \u2705 explicitly supported, \u274c explicitly not supported, (blank) not relevant or currently not supported</p>"},{"location":"#issues-suggestions-contributions","title":"Issues / Suggestions / Contributions","text":"<p>Slap is currently very opinionated by the fact that I built it as my personal workflow tool, but I welcome suggestions and contributions, and I am hopeful it will be useful to a wider audience than myself.</p> <p>Please report any issues you encounter via GitHub Issues. Feel free to use the GitHub Discussions forum to ask questions or make suggestions on new features (e.g. if you would like a new build backend to be supported?). Lastly, feel free to submit pull requests to the GitHub Repository.</p>"},{"location":"#faq","title":"FAQ","text":""},{"location":"#why-slap","title":"Why \"Slap\"?","text":"<p>Finding a good, catchy name that also types easily in the terminal and is not already widely used isn't easy, ok?</p>"},{"location":"#what-makes-this-different-to-the-poetry-cli","title":"What makes this different to the Poetry CLI?","text":"<p>Some people might find this similar to tools like Poetry, and while there is some overlap in functionality, Slap is not a build backend and is more targeted towards library development. In fact, most of my projects use Poetry as the build backend but I never even once interact with the Poetry CLI throughout the lifetime of the project.</p> <p>The most notable differences to Poetry are</p> <ul> <li>Supports mono-repositories (i.e. multiple related Python projects in the same repository), to the extent that it   bumps version numbers of project inter-dependencies and installs your projects in topological order</li> <li>Supports development installs independent of the build backend (yes; this means you can install Poetry packages   in editable mode even though the Poetry backend right now does not support editable installs)</li> <li>Slap's version bump command (<code>slap release</code>) updates the version not just in your <code>pyproject.toml</code> but also the   <code>__version__</code> in your source code as well as in related projects (see mono-repositories above) and any additional   references you can configure via Regex patterns</li> <li>Does not automagically create a virtual environment for you when instal your project(s); instead, it errors when   you try to install into a non-virtual Python environment and gives you an easy-to-use tool to create and activate   virtual environments (and allowing multiple environments per project as well as global environments)</li> <li>Uses Pip to install your project(s), unlike Poetry which comes with its own dependency resolver and package   installer (which I personally have been having a lot of issues with in the past).</li> <li>Does not have a concept of lock files</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#1140-2024-05-31","title":"1.14.0 (2024-05-31)","text":"TypeDescriptionPRIssuesAuthor Breaking change  Drop support for installing into Python 3.6 virtual environments118@NiklasRosenstein Improvement  Upgrade Build to ^1.0.0119@NiklasRosenstein Improvement  Upgrade UV to ^0.2.0141@NiklasRosenstein Fix  Use correct cmd option146@mcintel"},{"location":"changelog/#1132-2024-03-06","title":"1.13.2 (2024-03-06)","text":"TypeDescriptionPRIssuesAuthor Fix  Try first to import `importlib.metadata` before `importlib_metadata` in `PythonEnvironment.get_distributions()`@NiklasRosenstein"},{"location":"changelog/#1131-2024-02-27","title":"1.13.1 (2024-02-27)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix creation of activate scripts when creating virtual environments with `venv` by passing the correct flag `--upgrade-deps` instead of `--upgrade`python-slap/slap-cli#135@NiklasRosenstein"},{"location":"changelog/#1130-2024-02-16","title":"1.13.0 (2024-02-16)","text":"TypeDescriptionPRIssuesAuthor Feature  Add `uv` support132@NiklasRosenstein"},{"location":"changelog/#1120-2024-01-27","title":"1.12.0 (2024-01-27)","text":"TypeDescriptionPRIssuesAuthor Improvement  Get rid of deprecated `nr.util` dependency by placing all the required bits of code into Slap itself108@NiklasRosenstein Improvement  Add `Once.flush()` to use that instead of `.get(resupply=True)`108@NiklasRosenstein Improvement  Use `importlib-metadata` package over `pkg_resources`108@NiklasRosenstein Improvement  Python 3.12 support108@NiklasRosenstein"},{"location":"changelog/#1112-2024-01-11","title":"1.11.2 (2024-01-11)","text":"TypeDescriptionPRIssuesAuthor Fix  Running `slap release` in a sub-project of a mono repository is now supported and only affects that sub-project.@NiklasRosenstein"},{"location":"changelog/#1111-2023-12-14","title":"1.11.1 (2023-12-14)","text":"TypeDescriptionPRIssuesAuthor Improvement  allow passing `none` or `null` for the `slap init --license` parameter103@NiklasRosenstein Feature  Add `slap venv --no-upgrade-pip` option and automatically upgrade Pip after creating a virtual environment if the option is not specified.103102@NiklasRosenstein Improvement  remove dependency on `pkg_resources` directly in the module, although a transitive dependency (`nr.util.plugin`) still uses it10498@NiklasRosenstein Fix  Fixed a bug in `slap release` where an unreleased changelog in the project root was not renamed and updated in a mono repository105@NiklasRosenstein"},{"location":"changelog/#1110-2023-11-07","title":"1.11.0 (2023-11-07)","text":"TypeDescriptionPRIssuesAuthor Feature  Add `component` key to changelog entries, and `slap add -C ` option@NiklasRosenstein"},{"location":"changelog/#1104-2023-10-16","title":"1.10.4 (2023-10-16)","text":"TypeDescriptionPRIssuesAuthor Improvement  Hide git fatal error97alex.spencer@helsing.ai"},{"location":"changelog/#1103-2023-09-12","title":"1.10.3 (2023-09-12)","text":"TypeDescriptionPRIssuesAuthor Fix  Allow `SHELL` to be not set when running the `slap venv` command@NiklasRosenstein"},{"location":"changelog/#1102-2023-09-08","title":"1.10.2 (2023-09-08)","text":"TypeDescriptionPRIssuesAuthor Fix  Use new Version for poetry-core and lock minor version9695@alexespencer"},{"location":"changelog/#1101-2023-09-08","title":"1.10.1 (2023-09-08)","text":"TypeDescriptionPRIssuesAuthor Fix  Pin `poetry-core` to `&lt;1.7.0` to prevent issues with the `poetry.core.semver` module that is being imported by Slap and removed in `poetry-core 1.7.0`@NiklasRosenstein"},{"location":"changelog/#1100-2023-08-16","title":"1.10.0 (2023-08-16)","text":"TypeDescriptionPRIssuesAuthor Feature  Add fish to supported shells for shimming92@jonhoo Fix  Fix: CI failing due to black complaining94florian.eich@helsing.ai Fix  Fix `GithubActionsRepositoryCiPlugin.publish_changes()` for when a repo lives under a symlinked directory (such as `/tmp -&gt; /private/tmp` on OSX)94@NiklasRosenstein"},{"location":"changelog/#198-2023-06-29","title":"1.9.8 (2023-06-29)","text":"TypeDescriptionPRIssuesAuthor Feature  Add `[tool.slap.release].pre_commit` option that can be used to run a command after `slap release` updated the files and before a commit is made and tagged.@NiklasRosenstein Improvement  Upgrade databind to `^4.4.0`@NiklasRosenstein"},{"location":"changelog/#197-2023-06-20","title":"1.9.7 (2023-06-20)","text":"TypeDescriptionPRIssuesAuthor Fix  Avoid trying to render files in __pycache__ when using `slap init`.@NiklasRosenstein"},{"location":"changelog/#196-2023-06-19","title":"1.9.6 (2023-06-19)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap install --from` and make it work with the `--only` option.@NiklasRosenstein"},{"location":"changelog/#195-2023-06-19","title":"1.9.5 (2023-06-19)","text":"TypeDescriptionPRIssuesAuthor Feature  the `--only` option to `slap install` can now receive multiple values delimited by commas, the `slap test` command now also takes an `--only` option.@NiklasRosenstein"},{"location":"changelog/#194-2023-05-19","title":"1.9.4 (2023-05-19)","text":"TypeDescriptionPRIssuesAuthor Fix  add missing readme key to pyproject.toml template@NiklasRosenstein"},{"location":"changelog/#193-2023-05-19","title":"1.9.3 (2023-05-19)","text":"TypeDescriptionPRIssuesAuthor Fix  Fixed `slap init` command which broke due to a change to the `ApplicationPlugin` constructor and a missing custom implementation of `InstallCommandPlugin.__init__()`@NiklasRosenstein"},{"location":"changelog/#192-2023-05-15","title":"1.9.2 (2023-05-15)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix using `slap install --from ` by passing the right CWD in `find_repository()`@NiklasRosenstein"},{"location":"changelog/#191-2023-05-15","title":"1.9.1 (2023-05-15)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix running command defined in Repository root with `slap run` broken by the previous version.@NiklasRosenstein"},{"location":"changelog/#190-2023-05-15","title":"1.9.0 (2023-05-15)","text":"TypeDescriptionPRIssuesAuthor Breaking change  Slap now tries to find the repository root even if the current working directory is in a sub-directory of a project in that mono repository. By default, projects in a mono repository will all share the same Virtual environment. This can be disabled by setting the `[tool.slap].shared_venv` setting in `pyproject.toml` to `false`.@NiklasRosenstein Improvement  `slap install` from a project inside a mono repository will only install that specific project and, if any, its dependencies among the projects in the same monorepository.@NiklasRosenstein Improvement  Ensure that `slap check`, `slap publish`, `slap report`, `slap run` and `slap test` only run in the context of the main project when in a subdirectory mapping to a Project instead of the entire repository.@NiklasRosenstein"},{"location":"changelog/#181-2023-05-13","title":"1.8.1 (2023-05-13)","text":"TypeDescriptionPRIssuesAuthor Improvement  add E203 to ignored lints in flake8@NiklasRosenstein Fix  Fix parsing version constraints that are wrapped with parentheses@NiklasRosenstein Fix  Fix Github workflow templates@NiklasRosenstein"},{"location":"changelog/#180-2023-05-13","title":"1.8.0 (2023-05-13)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap changelog diff pr update --use github-actions` command used by the `NklasRosenstein/slap@gha/changelog/update/v2` action to support forks.@NiklasRosenstein Improvement  Store templates that can be created with `slap init` in files instead of in code, improve Python template to include `pycln` and a dummy for running `slap run docs:build`, updated Github actions workflow templates to use `pull_request_target` for changelog validation@NiklasRosenstein Improvement  add `skip-checks: true` to commits pushed by `slap changelog diff pr update`@NiklasRosenstein"},{"location":"changelog/#176-2023-03-16","title":"1.7.6 (2023-03-16)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix extracting package \"extras\" from the Poetry dependencies configuration.@NiklasRosenstein"},{"location":"changelog/#175-2023-03-13","title":"1.7.5 (2023-03-13)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix a `NameError` that occurred in `slap changelog format --markdown` when Slap does not understand the repository host of your project.@NiklasRosenstein"},{"location":"changelog/#174-2023-03-05","title":"1.7.4 (2023-03-05)","text":"TypeDescriptionPRIssuesAuthor Improvement  Add `.dmypy.json` to `.gitignore` generated with `slap init`.@NiklasRosenstein Fix  Fix regression when using `slap run ` where `` is not a command defined in the project or repository configuration introduced in the previous version.87@NiklasRosenstein Improvement  To avoid confusion, the `slap run` command now must be run from a virtual environment.89@NiklasRosenstein"},{"location":"changelog/#173-2023-03-05","title":"1.7.3 (2023-03-05)","text":"TypeDescriptionPRIssuesAuthor Fix  Dependency with extras are now written correctly into `pyprojec.toml` for Poetry projects8481@NiklasRosenstein Feature  The `slap run` command can now run the commands defined in every project of a monorepository (if set), only if the monorepository does not define the command itself (in `slap.toml`).8582@NiklasRosenstein"},{"location":"changelog/#172-2023-02-20","title":"1.7.2 (2023-02-20)","text":"TypeDescriptionPRIssuesAuthor Improvement  fix spelling in warning log@NiklasRosenstein Feature  Add zsh to supported shells for shimming@cdbrkfxrpt Fix  Fix outdated command documentation@cdbrkfxrpt Improvement  Rename `GitRepositoryHostPlugin` to `RepositoryCIPlugin`; this clarifies the intent and reduces confusion with the `RepositoryHost` interface.79@NiklasRosenstein Improvement  allow GitHub username resolution to raise any Exception; we catch it, log it and fall back to using the configured Git email address instead.80@NiklasRosenstein"},{"location":"changelog/#171-2023-02-09","title":"1.7.1 (2023-02-09)","text":"TypeDescriptionPRIssuesAuthor Fix  The Poetry key for dependency groups is `[tool.poetry.group]`, not `[tool.poetry.groups]`. We now support both but show a warning if the latter is used to inform the user that they should be using `group` instead.77@NiklasRosenstein"},{"location":"changelog/#170-2023-02-06","title":"1.7.0 (2023-02-06)","text":"TypeDescriptionPRIssuesAuthor Breaking change  Reimplement command to update PRs in added changelog entries and rename it to `slap changelog diff pr update`75@NiklasRosenstein Improvement  Update `GithubActionsChangelogUpdateAutomationPlugin.get_pr()` to return the full PR URL instead of just the number.75@NiklasRosenstein Breaking change  Rename `ChangelogUpdateAutomationPlugin` to `GitRepositoryHostPlugin`, add `GitRepositoryHostPlugin.all()` and `~.get()`, rename plugin entrypoint from `slap.plugins.changelog_update_automation` to `slap.plugins.git_repository_host`75@NiklasRosenstein Feature  add `slap changelog diff assert-added`75@NiklasRosenstein"},{"location":"changelog/#1633-2023-01-29","title":"1.6.33 (2023-01-29)","text":"TypeDescriptionPRIssuesAuthor Improvement  improve error message when there is no current environment set via `slap venv -s {env}`@NiklasRosenstein Feature  support Poetry 1.2.0+ new `tool.poetry.group.dev.dependencies`@NiklasRosenstein Fix  fix `pyproject.toml` for Poetry 1.3.0+ validation of `tool.poetry.extras` which can only list dependency names, but not their version constraints. Instead, use `tool.poetry.groups.*` introduced in Poetry 1.2.0@NiklasRosenstein Fix  some internal mypy fixes that come up with newer versions of MyPy@NiklasRosenstein"},{"location":"changelog/#1632-2023-01-22","title":"1.6.32 (2023-01-22)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix running Slap on Windows for commands run from `slap test` and detecting the active Python virtualenv.@NiklasRosenstein"},{"location":"changelog/#1631-2022-12-01","title":"1.6.31 (2022-12-01)","text":"TypeDescriptionPRIssuesAuthor Fix  fix `.flake8` config in template created by `slap init`, newer versions of Flake will error if a comment is on the same line with a value@NiklasRosenstein"},{"location":"changelog/#1630-2022-09-20","title":"1.6.30 (2022-09-20)","text":"TypeDescriptionPRIssuesAuthor Fix  fixed an issue with `poetry-core ==1.2.0`python-slap/slap-cli#66@NiklasRosenstein"},{"location":"changelog/#1629-2022-09-12","title":"1.6.29 (2022-09-12)","text":"TypeDescriptionPRIssuesAuthor Fix  fix return code of `slap venv --exists,-e`@NiklasRosenstein"},{"location":"changelog/#1628-2022-09-12","title":"1.6.28 (2022-09-12)","text":"TypeDescriptionPRIssuesAuthor Feature  add `--use-venv` option to all Venv-aware commands, add `slap venv --exists,-e` flag@NiklasRosenstein"},{"location":"changelog/#1627-2022-09-05","title":"1.6.27 (2022-09-05)","text":"TypeDescriptionPRIssuesAuthor Fix  Updated how `slap install --index` and `--extra-index` are used to inject credentials; they now behave the same (with `--extra-index` marked as deprecated). The `url` is now optional, allowing you use the option only to inject credentials of a package index configured in the project (e.g. `pyproject.toml`) without specifying the URL@NiklasRosenstein"},{"location":"changelog/#1626-2022-07-31","title":"1.6.26 (2022-07-31)","text":"TypeDescriptionPRIssuesAuthor Fix  bump dependency on `nr.util` which is guaranteed to have the `nr.utils.url` package@NiklasRosenstein"},{"location":"changelog/#1625-2022-07-29","title":"1.6.25 (2022-07-29)","text":"TypeDescriptionPRIssuesAuthor Breaking change  replace `--index-url` option with `--index` option which takes the same format as `--extra-index` (but the `name=` key can be omitted)@NiklasRosenstein"},{"location":"changelog/#1624-2022-07-21","title":"1.6.24 (2022-07-21)","text":"TypeDescriptionPRIssuesAuthor Improvement  make use of `nr.python.environment` package to detect and deactivate/activate a virtual env@NiklasRosenstein Feature  add `--index-url` and `--extra-index` option to `slap install` (note that `--extra-index` requires a different value format than Pip's `--extra-index-url`  option)@NiklasRosenstein"},{"location":"changelog/#1623-2022-07-21","title":"1.6.23 (2022-07-21)","text":"TypeDescriptionPRIssuesAuthor Fix  fix an AttributeError when using new `--ignore-active-venv` option (no clue why Mypy did not pick it up)@NiklasRosenstein"},{"location":"changelog/#1622-2022-07-21","title":"1.6.22 (2022-07-21)","text":"TypeDescriptionPRIssuesAuthor Feature  add `--ignore-active-venv` option to Venv-aware commands such as `slap install`@NiklasRosenstein Fix  fix wrong return code in `slap install` if venv check fails (e.g. if attempting to install into a virtual environment without `--no-venv-check`)@NiklasRosenstein"},{"location":"changelog/#1621-2022-07-17","title":"1.6.21 (2022-07-17)","text":"TypeDescriptionPRIssuesAuthor Fix  fix `slap report dependencies` command (regression in previous release)@NiklasRosenstein"},{"location":"changelog/#1620-2022-07-16","title":"1.6.20 (2022-07-16)","text":"TypeDescriptionPRIssuesAuthor Fix  `slap publish` now builds from the current project subdirectory@NiklasRosenstein"},{"location":"changelog/#1619-2022-07-16","title":"1.6.19 (2022-07-16)","text":"TypeDescriptionPRIssuesAuthor Fix  fix error message on missing `py.typed` file62@NiklasRosenstein Improvement  add `--no-venv-check` option to `VenvAwareCommand`, fixes #6161@NiklasRosenstein Improvement  use `build` module instead of hand-crafted build backend, add `Dependencies.build` property53@NiklasRosenstein"},{"location":"changelog/#1618-2022-07-01","title":"1.6.18 (2022-07-01)","text":"TypeDescriptionPRIssuesAuthor Feature  add `slap test -x,--exclude` option@NiklasRosenstein"},{"location":"changelog/#1617-2022-06-20","title":"1.6.17 (2022-06-20)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap install --upgrade` option which is now correctly a flag when it previously incorrectly expected an argument@NiklasRosenstein"},{"location":"changelog/#1616-2022-06-20","title":"1.6.16 (2022-06-20)","text":"TypeDescriptionPRIssuesAuthor Improvement  Add `W503` and `W504` to `.flake8` file of `slap init`@NiklasRosenstein"},{"location":"changelog/#1615-2022-05-27","title":"1.6.15 (2022-05-27)","text":"TypeDescriptionPRIssuesAuthor Improvement  add `strict` option to Mypy settings in template@NiklasRosenstein"},{"location":"changelog/#1614-2022-05-23","title":"1.6.14 (2022-05-23)","text":"TypeDescriptionPRIssuesAuthor Fix  Add missing black options to init template@NiklasRosenstein Improvement  Init template now uses dmypy by default@NiklasRosenstein Improvement  Set python_version = 3.6 in Init template@NiklasRosenstein Fix  `slap install` no longer calls Pip without dependenciesto install, instead it prints this info and exits successfully@NiklasRosenstein"},{"location":"changelog/#1613-2022-05-06","title":"1.6.13 (2022-05-06)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix misspelling in GH template@NiklasRosenstein"},{"location":"changelog/#1612-2022-05-06","title":"1.6.12 (2022-05-06)","text":"TypeDescriptionPRIssuesAuthor Improvement  Update GH action reference after Slap repository was moved from `NiklasRosenstein/slap` to `python-slaps/slap.cli`@NiklasRosenstein"},{"location":"changelog/#1611-2022-05-06","title":"1.6.11 (2022-05-06)","text":"TypeDescriptionPRIssuesAuthor Improvement  Update default template to include black, isort, flake8@NiklasRosenstein Improvement  Set min Python version in init templates to 3.6@NiklasRosenstein"},{"location":"changelog/#1610-2022-05-02","title":"1.6.10 (2022-05-02)","text":"TypeDescriptionPRIssuesAuthor Fix  The `slap add` command now installs the dependency even if `--upgrade` is not specified if the constraint does not accept the currently installed version.@NiklasRosenstein"},{"location":"changelog/#169-2022-04-28","title":"1.6.9 (2022-04-28)","text":"TypeDescriptionPRIssuesAuthor Fix  Use SPDX license information only in `slap.util.extenral.licenses` instead of Deja code which now requires a login; this fixes `slap init` when it tries to get the license text@NiklasRosenstein"},{"location":"changelog/#168-2022-04-28","title":"1.6.8 (2022-04-28)","text":"TypeDescriptionPRIssuesAuthor Fix  Automatic detection of packages now ignores subdirectories that have a `pyproject.toml` file@NiklasRosenstein"},{"location":"changelog/#167-2022-04-26","title":"1.6.7 (2022-04-26)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap venv X.Y` to create an environment of the specified Python major/minor version@NiklasRosenstein"},{"location":"changelog/#166-2022-04-26","title":"1.6.6 (2022-04-26)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix (workaround) to installing packages with `slap install` option without the `--link` option if it has runtime dependencies that require extra index URLs.@NiklasRosenstein"},{"location":"changelog/#165-2022-04-21","title":"1.6.5 (2022-04-21)","text":"TypeDescriptionPRIssuesAuthor Fix  The `slap link` command no longer fails when run as root (due to Flit adding a check here; if we want to have the same check in Slap we need to do it ourselves in `slap install` as well)@NiklasRosenstein"},{"location":"changelog/#164-2022-04-19","title":"1.6.4 (2022-04-19)","text":"TypeDescriptionPRIssuesAuthor Improvement  Set `VIRTUAL_ENV` when venv-aware command activates the environment@NiklasRosenstein Feature  Add `--from` action to `slap install` command@NiklasRosenstein Improvement  The `slap link` command is no longer limited to symlinking only one package per project@NiklasRosenstein"},{"location":"changelog/#163-2022-04-18","title":"1.6.3 (2022-04-18)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix venv aware commands to add the absolute path to the `PATH` environment variable instead of a relative path@NiklasRosenstein"},{"location":"changelog/#162-2022-04-18","title":"1.6.2 (2022-04-18)","text":"TypeDescriptionPRIssuesAuthor Improvement  Add `PythonEnvironment.version_tuple`@NiklasRosenstein Improvement  The `slap venv` command now automatically picks an environment name if you do not specify one with the `-c,--create` flag@NiklasRosenstein Improvement  Changed `slap install` to no longer install all extras defined in the project by default, now you need to explicitly specify them in `[tool.slap.install].dev-extras`@NiklasRosenstein"},{"location":"changelog/#161-2022-04-16","title":"1.6.1 (2022-04-16)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap link` to produce absolute paths in the shebang for generated scripts by supplying an absolute path to the Python interpreter to the Flit installer@NiklasRosenstein"},{"location":"changelog/#160-2022-04-16","title":"1.6.0 (2022-04-16)","text":"TypeDescriptionPRIssuesAuthor Feature  add `-p,--path` option to `slap venv` command, note that `-p` was repurposed from `--python` and the option no longer has a short form@NiklasRosenstein Improvement  `slap test` and `slap run` commands now activate the active virtual environment if any before running the commands@NiklasRosenstein Feature  Add `-s,--set` option to `slap venv`@NiklasRosenstein Improvement  The `slap run` command can now run arbitrary commands, but falls back to the ones aliased on the configuration on a match.@NiklasRosenstein Improvement  Add `VenvAwareCommand` and use it in `add`, `install`, `link`, `report`, `run` and `test`@NiklasRosenstein Improvement  Add `location` to `DistributionMetadata`, which propagates into the output of `slap report dependencies`@NiklasRosenstein"},{"location":"changelog/#154-2022-04-14","title":"1.5.4 (2022-04-14)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix issue with \"cannot install into global environment\" even if a Slap venv is active@NiklasRosenstein"},{"location":"changelog/#153-2022-04-14","title":"1.5.3 (2022-04-14)","text":"TypeDescriptionPRIssuesAuthor Fix  Fixed forwarding `--python` argument to `slap link` command when using `slap install --link`@NiklasRosenstein Improvement  For all Slap commands that operate on a Python environment (`install`, `link`, `add`), they will now look for the environment to target in the following order: 1) the `-p,--python` option, 2) the `PYTHON` environment variable, 3) the last local activated environment with `slap venv`, 4) just use `python`58@NiklasRosenstein"},{"location":"changelog/#152-2022-04-13","title":"1.5.2 (2022-04-13)","text":"TypeDescriptionPRIssuesAuthor Fix  fix in pep508@NiklasRosenstein"},{"location":"changelog/#151-2022-04-13","title":"1.5.1 (2022-04-13)","text":"TypeDescriptionPRIssuesAuthor Fix  `slap.python.pep508` no longer requires `dataclasses`@NiklasRosenstein"},{"location":"changelog/#150-2022-04-13","title":"1.5.0 (2022-04-13)","text":"TypeDescriptionPRIssuesAuthor Fix  fix pep508 invokation when installing into Pytho 3.6 environments@NiklasRosenstein"},{"location":"changelog/#145-2022-04-04","title":"1.4.5 (2022-04-04)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap venv link` linking to an absolute path (correct) instead of a relartive path (wrong) when linking from a local environment@NiklasRosenstein Improvement  No longer error when running Slap in a Python project directory using Poetry where some dependencies are declared using the table format in TOML, but log that the type of dependency is currently unsupported@NiklasRosenstein Improvement  Allow unrecognized keys in `ChangelogConfig`@NiklasRosenstein Improvement  Add a separate API to retrieve the projects in a repository in topological order such that most Slap commands that do not care about the order do not have the overhead of inspecting the project dependencies and sorting the projects.NiklasRosenstein/slam#50@NiklasRosenstein Feature  Add `slap.dependency` module@NiklasRosenstein Feature  Add `slap report dependencies` command@NiklasRosenstein Fix  Fix detection of added changelog entries in GitHub Actions for forked repositories; but that does not fix #49@NiklasRosenstein Fix  Fix a potential issue in `slap add` when `tomlkit` returns an `OutOfOrderTableProxy` instead of a `Table` container in which case we did not mutate the actual TOML document@NiklasRosenstein Feature  Add `--source` option to `slap add` command@NiklasRosenstein"},{"location":"changelog/#144-2022-04-04","title":"1.4.4 (2022-04-04)","text":"TypeDescriptionPRIssuesAuthor Improvement  add `-g,--global` option to `slap venv link` command@NiklasRosenstein Improvement  read Git `user.name` and `user.email` from local repository first and then globally@NiklasRosenstein"},{"location":"changelog/#143-2022-04-03","title":"1.4.3 (2022-04-03)","text":"TypeDescriptionPRIssuesAuthor Fix  Add missing `tomlkit` dependency (needed by the `slap add` command)@NiklasRosenstein"},{"location":"changelog/#142-2022-03-31","title":"1.4.2 (2022-03-31)","text":"TypeDescriptionPRIssuesAuthor Fix  adjust for breaking changes in databind 2.0.0 (no more databind.json.settings module)@NiklasRosenstein"},{"location":"changelog/#141-2022-03-31","title":"1.4.1 (2022-03-31)","text":"TypeDescriptionPRIssuesAuthor Improvement  Enhance docs and output of `slap venv` command@NiklasRosenstein Improvement  The `slap venv` command can now be used with `-a,--activate` and without a `name` argument to activate the previously activated environment or the only one that is available in the context (local vs. global).@NiklasRosenstein Improvement  Improve `ChangelogReleasePlugin` to write \"releasing changelog\" line only once@NiklasRosenstein Improvement  Improve changelog checks plugin to catch more types of errors to return in the check details@NiklasRosenstein Improvement  improve output produces by `slap venv -a`, `slap publish` and `slap release`@NiklasRosenstein"},{"location":"changelog/#140-2022-03-29","title":"1.4.0 (2022-03-29)","text":"TypeDescriptionPRIssuesAuthor Feature  Add `ProjectHandler.add_dependency()` and `Project.add_dependency()@NiklasRosenstein Feature  Add `slap add` command@NiklasRosenstein"},{"location":"changelog/#136-2022-03-27","title":"1.3.6 (2022-03-27)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `NameError` in non-monorepository scenario when using `slap install`@NiklasRosenstein"},{"location":"changelog/#135-2022-03-24","title":"1.3.5 (2022-03-24)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slap release` to consider the monorepository config as well@NiklasRosenstein"},{"location":"changelog/#134-2022-03-24","title":"1.3.4 (2022-03-24)","text":"TypeDescriptionPRIssuesAuthor Improvement  `slam install` without `--no-dev` now installs _all_ extras for a project unless the new `[install.dev-extras]` option is set@NiklasRosenstein"},{"location":"changelog/#133-2022-03-24","title":"1.3.3 (2022-03-24)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix how `[install.extras]` is taken into account (used to always take all extras)@NiklasRosenstein"},{"location":"changelog/#132-2022-03-24","title":"1.3.2 (2022-03-24)","text":"TypeDescriptionPRIssuesAuthor Feature  support `[install.extras]` option in the monorepository and project config@NiklasRosenstein"},{"location":"changelog/#131-2022-03-24","title":"1.3.1 (2022-03-24)","text":"TypeDescriptionPRIssuesAuthor Feature  add `github` template to `slap init`@NiklasRosenstein Fix  `slap run` now uses the reopsitory `slap.toml` configuration file to read the run configuration if no main project exists; `Application.main_project()` no longer tries to find the \"closest\" project because right now Slap does not actually try to find a \"better\" project root than the current working directory@NiklasRosenstein"},{"location":"changelog/#130-2022-03-23","title":"1.3.0 (2022-03-23)","text":"TypeDescriptionPRIssuesAuthor Improvement  upgrade to using `databind` 2.x@NiklasRosenstein Breaking change  Rename Slam to Slap@NiklasRosenstein Improvement  Split default project handler into separate implementations for Poetry, Flit and Setuptools and properly support Setuptools now (reading `setup.cfg`)@NiklasRosenstein Feature  add `-b,--build-directory` option to `slap publish` command@NiklasRosenstein Feature  add `slap.check.check()` decorator and `slap.check.get_checks()` function to make implementing check plugins more convenient@NiklasRosenstein Improvement  add `Project.version()` and `Project.get_version_refs()`@NiklasRosenstein Improvement  move interdependencies version ref detection into `DefaultProjectHandler`@NiklasRosenstein Improvement  add overload for `match_version_ref_pattern()` that can return a fallback value@NiklasRosenstein"},{"location":"changelog/#124-2022-03-22","title":"1.2.4 (2022-03-22)","text":"TypeDescriptionPRIssuesAuthor Improvement  The default repository handler now only matches if it appears to make sense to use the Slam CLI inside it.@NiklasRosenstein Feature  add `slam venv` and `slam venv link` commands@NiklasRosenstein Fix  `slam init` now identifies the author to use in the template from Git's global config if the current directory is not already a Git repository@NiklasRosenstein"},{"location":"changelog/#123-2022-03-20","title":"1.2.3 (2022-03-20)","text":"TypeDescriptionPRIssuesAuthor Fix  Fix `slam install` command accessing the wrong option name for `--no-venv-check` causing an error when `--link` was used@NiklasRosenstein"},{"location":"changelog/#122-2022-03-20","title":"1.2.2 (2022-03-20)","text":"TypeDescriptionPRIssuesAuthor Improvement  `test` command no info-logs the command being run@NiklasRosenstein Feature  add `slam test -l,--list` option@NiklasRosenstein Improvement  `slam init -t poetry` now creates a test file@NiklasRosenstein Fix  Fix `slam init` to create a `test/test_import.py` instead of `test/test.py`@NiklasRosenstein Fix  Fix `slam install` command to forward to the `--no-venv-check` option to the `slam link` command@NiklasRosenstein Fix  Fix `slam changelog convert` to use the proper default author@NiklasRosenstein"},{"location":"changelog/#121-2022-03-14","title":"1.2.1 (2022-03-14)","text":"TypeDescriptionPRIssuesAuthor Feature  add `slam changelog ` argument, defaults to the same as `--name`@NiklasRosenstein Improvement  `slam init` now understands dots as namespace packages@NiklasRosenstein Improvement  `slam init` package name written into `pyproject.toml` keeps dots@NiklasRosenstein Feature  add `slam run` command@NiklasRosenstein Improvement  added `-vv` flag to Pytest command rendered in `pyproject.toml` by `slam init -t poetry` @NiklasRosenstein"},{"location":"changelog/#120-2022-03-03","title":"1.2.0 (2022-03-03)","text":"TypeDescriptionPRIssuesAuthor Refactor  add `Repository` and `RepositoryHandlerPlugin` which gets to decide which projects are loaded, remove most of the related members from the `Application` class@NiklasRosenstein Improvement  morph `VcsHost` into `RepositoryHost` classNiklasRosenstein Fix  fix possible `AssertionError` in `Application._get_main_project()` that can occur if Slam is invoked in a directory that does not contain a `pyproject.toml` nor `slam.toml` file.@NiklasRosenstein Improvement  `slam changelog format` in the Terminal now colorizes inline code (indicated by backticks)@NiklasRosenstein Improvement  All application plugins are now loaded by default (no explicit list of plugins to load), but the `tool.slam.application.disable` config persists to disable the activation of a particular set of plugins@NiklasRosenstein Feature  add `slam init` command@NiklasRosenstein"},{"location":"changelog/#112-2022-03-02","title":"1.1.2 (2022-03-02)","text":"TypeDescriptionPRIssuesAuthor Fix  `git+https://...` requirements are now understood and no longer converted into a dependency caled just \"git\"@NiklasRosenstein"},{"location":"changelog/#111-2022-02-26","title":"1.1.1 (2022-02-26)","text":"TypeDescriptionPRIssuesAuthor Fix  support old `break` change type and convert it to `breaking change`@NiklasRosenstein Feature  add `slam publish --dry,-d` option@NiklasRosenstein"},{"location":"changelog/#110-2022-02-26","title":"1.1.0 (2022-02-26)","text":"TypeDescriptionPRIssuesAuthor Improvement  add `Project.application` member@NiklasRosenstein Feature  add release plugin to automatically bump interdependencies between projects in a monorepository (can be disabled by setting `tool.slam.release.interdependencies = false`)@NiklasRosenstein"},{"location":"changelog/#1010-2022-02-25","title":"1.0.10 (2022-02-25)","text":"TypeDescriptionPRIssuesAuthor Fix  `slam install` now skips projects that dont expose Python packages@NiklasRosenstein"},{"location":"changelog/#109-2022-02-25","title":"1.0.9 (2022-02-25)","text":"TypeDescriptionPRIssuesAuthor Fix  fix consistent sorting of packages ordered topologically by interdependencies@NiklasRosenstein Feature  recognize `tool.poetry.packages` option in `DefaultProjectHandler.get_packages()`@NiklasRosenstein"},{"location":"changelog/#108-2022-02-25","title":"1.0.8 (2022-02-25)","text":"TypeDescriptionPRIssuesAuthor Fix  `slam changelog convert-pr` command now provides YAML error details if the file cannot be parsed and allows the `release_date` to not be set (to convert `_unreleased.yml`)@NiklasRosenstein Fix  `Project.get_packages()` no longer delegates to the `ProjectHandler` if the project is not a Python project (does not have a `pyproject.toml`) to avoid weird namespace packages to be detected unintentionally@NiklasRosenstein"},{"location":"changelog/#107-2022-02-23","title":"1.0.7 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Fix  `slam test` now only runs subproject tests instead of all tests in a monorepo if the main project (the one from the cwd) is not the same as the root project@NiklasRosenstein Fix  `slam changelog update-pr` always counted 0 entries to update and thus never committed the changes@NiklasRosenstein"},{"location":"changelog/#106-2022-02-23","title":"1.0.6 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Improvement  `slam changelog update-pr` no longer overwrites existing PR references in entries unless the new `--overwrite` option is passed@NiklasRosenstein"},{"location":"changelog/#105-2022-02-23","title":"1.0.5 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Feature  add `ChangelogManager.readonly` which prevents you from saving a changelog to disk@NiklasRosenstein Feature  add `[tool.shut.changelog].enabled` option which can be used to turn off the ability to add changelogs to the current project via the CLI@NiklasRosenstein"},{"location":"changelog/#104-2022-02-23","title":"1.0.4 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Improvement  hide output from `git checkout -b` in `github-actions` plugin@NiklasRosenstein Fix  fix shortform detection for GitHub pull request URLs@NiklasRosenstein"},{"location":"changelog/#103-2022-02-23","title":"1.0.3 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Improvement  use more concrete branch name for checkout in `github-actions` plugin to work around issues if the branch name is the same as a top level folder in the repository@NiklasRosenstein Fix  fix `github-actions` tendency to swallow command output which could have been of use in case of an error@NiklasRosenstein"},{"location":"changelog/#102-2022-02-23","title":"1.0.2 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Improvement  parse semver in `[tool.poetry.extras]`@NiklasRosenstein Feature  add `--extras` and `--only-extras` options to `slam install`@NiklasRosenstein"},{"location":"changelog/#101-2022-02-23","title":"1.0.1 (2022-02-23)","text":"TypeDescriptionPRIssuesAuthor Fix  fix the URL generated for pull request IDs when passed to the `slam changelog add` command for Github hosted repositories@NiklasRosenstein"},{"location":"changelog/#100a6-2022-02-15","title":"1.0.0a6 (2022-02-15)","text":"TypeDescriptionPRIssuesAuthor Improvement  `Command.help` now treats the first line differently to support docstrings where the first line is on the same line as the quotes@NiklasRosenstein Improvement  `slam changelog update-pr` now supports updating the PR reference for changelogs of all projects@NiklasRosenstein"},{"location":"changelog/#100a5-2022-02-15","title":"1.0.0a5 (2022-02-15)","text":"TypeDescriptionPRIssuesAuthor Fix  test runner without TTY now does the correct line prefixing@NiklasRosenstein"},{"location":"changelog/#100a3-2022-02-13","title":"1.0.0a3 (2022-02-13)","text":"TypeDescriptionPRIssuesAuthor Fix  fix entrypoint for `slam` script@NiklasRosenstein"},{"location":"changelog/#100a2-2022-02-13","title":"1.0.0a2 (2022-02-13)","text":"TypeDescriptionPRIssuesAuthor Improvement  reduce code duplicity in `shut.commands.link` and `shut.util.python_package`@NiklasRosenstein Fix  fix `shut log command --author,-a` option being a flag@NiklasRosenstein Improvement  allow `pyproject.toml` to not exist when using `shut release` command@NiklasRosenstein Improvement  fix pattern replacing `{version}` string in release references@NiklasRosenstein Improvement  Add `Application.load_subapp()` and `Application.subapps`@NiklasRosenstein Improvement  `shut release` now has an `include` configuration key that can be used to include the version refs of sub projects, for example in a mono repository where a root `shut.toml` is used to manage the same version number across all components@NiklasRosenstein Improvement  add support for `SLAM_DIR` environment variable@NiklasRosenstein"},{"location":"changelog/#100a1-2022-02-13","title":"1.0.0a1 (2022-02-13)","text":"TypeDescriptionPRIssuesAuthor Breaking change  Fully reimplment Shut, rename it to Slam@NiklasRosenstein"},{"location":"changelog/#0211-2021-11-21","title":"0.21.1 (2021-11-21)","text":"TypeDescriptionPRIssuesAuthor Fix  using `VirtualFiles.get_modified_files()` no longer creates non-existent directories@NiklasRosenstein Fix  catch malformed ref error when trying to determine main branch name and use `develop` as default (see #40)@NiklasRosenstein Fix  `$package.render-requirements-txt` is now handled correctly@NiklasRosenstein"},{"location":"changelog/#0210-2021-09-18","title":"0.21.0 (2021-09-18)","text":"TypeDescriptionPRIssuesAuthor Feature  add `$.scripts` in `package.yml` and `shut pkg run` command@NiklasRosenstein"},{"location":"changelog/#0200-2021-09-16","title":"0.20.0 (2021-09-16)","text":"TypeDescriptionPRIssuesAuthor Feature  add `shut init` command group with initial `shut init mkdocs` command@NiklasRosenstein Feature  add `documentation` job in GitHub Actions template@NiklasRosenstein Feature  ignore GitHub Actions template when checking package config in GitHub Actions (this is mainly used when using an unreleased version of shut to generate the action template or when needing to do quick modifications to the action config without triggering the shut checks in CI).@NiklasRosenstein"},{"location":"changelog/#0190-2021-09-15","title":"0.19.0 (2021-09-15)","text":"TypeDescriptionPRIssuesAuthor Improvement  Changelog entry `fixes` is now optional@NiklasRosenstein Improvement  switch to Mako as a template engine from Jinja2@NiklasRosenstein Feature  add `$.templates` to `AbstractProjectModel` and the `github-actions` template@NiklasRosenstein Improvement  `shut pkg new` now adds the `github-template` to the generated `package.yml`@NiklasRosenstein Improvement  remove template rendering capability of `pylint` test driver, instead add `pylintrc` template plugin@NiklasRosenstein"},{"location":"changelog/#0182-2021-09-04","title":"0.18.2 (2021-09-04)","text":"TypeDescriptionPRIssuesAuthor Fix  min `click` version must be `7.1` for `no_args_is_help` option, also allow `8.x`@NiklasRosenstein"},{"location":"changelog/#0181-2021-08-27","title":"0.18.1 (2021-08-27)","text":"TypeDescriptionPRIssuesAuthor Fix  fix added in `0.18.0` for #33 is actually incorrect, the `command` variable was needed when using the `_tempcopy()` feature. now it is fixed for goodNiklasRosenstein/shut#33@NiklasRosenstein"},{"location":"changelog/#0180-2021-08-26","title":"0.18.0 (2021-08-26)","text":"TypeDescriptionPRIssuesAuthor Feature  add `pylint` test driver@NiklasRosenstein Fix  the fix from `0.17.4` actually made the install cache not work at all and just always install test requirements, now shut knows per driver selection whether dependencies have been installed before or not@NiklasRosenstein Feature  test drivers are now loaded via the `shut.test_drivers` entrypoint, allowing plugins to be registered from external packages@NiklasRosenstein Feature  internal: add `AbstractProjectModel.get_auxiliary_renderers()`@NiklasRosenstein Feature  `pylint` now comes with `.pylintrc` templates (only `shut` for now) and can also render templates from HTTP(S) URLs@NiklasRosenstein Feature  Shut now recognizes lowercase readme/license filesNiklasRosenstein/shut#31@NiklasRosenstein Fix  render `command` variable into `setup.py` only if package `$.install.hooks` is usedNiklasRosenstein/shut#33@NiklasRosenstein"},{"location":"changelog/#0174-2021-08-20","title":"0.17.4 (2021-08-20)","text":"TypeDescriptionPRIssuesAuthor Fix  fix missing test-requirements installation with `shut mono|pkg test --isolate` if the comand was run previously@NiklasRosenstein"},{"location":"changelog/#0173-2021-08-20","title":"0.17.3 (2021-08-20)","text":"TypeDescriptionPRIssuesAuthor Fix  `shut mono|pkg test --isolate` no longer installs the main package in develop mode@NiklasRosenstein"},{"location":"changelog/#0172-2021-08-14","title":"0.17.2 (2021-08-14)","text":"TypeDescriptionPRIssuesAuthor Fix  `shut mono|pkg update --verify-tag \"\"` does not show an error when it should@NiklasRosenstein Feature  `shut mono|pkg update --verify-tag` now accepts strings prefixed with `refs/tags/` and strips that prefix (useful for GitHub Actions to use the `$GITHUB_REF` variable)@NiklasRosenstein Fix  `shut pkg update --dry` option not respected@NiklasRosenstein"},{"location":"changelog/#0171-2021-08-13","title":"0.17.1 (2021-08-13)","text":"TypeDescriptionPRIssuesAuthor Improvement  dd `shut mono|pkg test -q,--quiet` option to quietly install test requirements with Pip, changed default to not do silent installs@NiklasRosenstein"},{"location":"changelog/#0170-2021-08-13","title":"0.17.0 (2021-08-13)","text":"TypeDescriptionPRIssuesAuthor Feature  add `shut pkg test --install/--no-install` which will default to `--install` if the current Python installation (determined by the `PYTHON` variable or falling back to just the `python` command) is a virtual env@NiklasRosenstein Feature  add support for a `mypy` test driver@NiklasRosenstein Feature  api: add `Package.get_source_directory()`@NiklasRosenstein Feature  add `$.test-drivers` field in package model and deprecate `$.test-driver` for it.@NiklasRosenstein Feature  add `shut mono test --install/--no-install` option (parallel to the existing option for `shut pkg test`), without the flag test requirements are only installed if Shut did not install the same requirements into the same environment before@NiklasRosenstein Feature  make sure `$.test-requirements` are installed when running `shut mono|pkg test` in addition to the test-driver requirements. Update some output formatting of `shut mono|pkg test`@NiklasRosenstein Fix  lines in `MANIFEST.in` outside the shut-specific block are not kept on `shut pkg update` (fixed in `VirtualFiles.write_all()`)@NiklasRosenstein Fix  package `$.author` data can now be de-serialized from a mapping again (as used to be possible before migrating to `databind.core^1.x`@NiklasRosenstein Fix  fix printing of `Failed test details:` when there were no failures but at least one skipped test case@NiklasRosenstein Feature  `pytest` driver now supports a `$.parallelism` option which automatically pulls in `pytest-xdist` as a test requirement@NiklasRosenstein Feature  `shut mono|pkg bump --tag|--push|--dry` options now have short versions `-t|-p|-d` respectively@NiklasRosenstein"},{"location":"changelog/#0161-2021-08-12","title":"0.16.1 (2021-08-12)","text":"TypeDescriptionPRIssuesAuthor Fix  pass `filename` to databind deserializer when loading monorepo/package configuration files@NiklasRosenstein Fix  Cannot run \"pip install\" without develop mode on package that inherits monorepo licenseNiklasRosenstein/shut#22@NiklasRosenstein"},{"location":"changelog/#0160-2021-08-10","title":"0.16.0 (2021-08-10)","text":"TypeDescriptionPRIssuesAuthor Fix  fix missing import for `typing.Dict` in `pytest` driver module, which could in some Python versions result in a `NameError`@NiklasRosenstein Improvement  add `extra_requires[test]` in generated `setup.py`@NiklasRosenstein Fix  fix `setup.py` rendering for inherit license filesNiklasRosenstein/shut#21@NiklasRosenstein Improvement  `_tempcopy()` function in `setup.py` now fails if the file cannot be copied from the source file@NiklasRosenstein"},{"location":"changelog/#0151-2021-08-09","title":"0.15.1 (2021-08-09)","text":"TypeDescriptionPRIssuesAuthor Feature  add BSD2, BSD3, BSD4 and Apache2 license templates@ndjeong"},{"location":"changelog/#0150-2021-08-09","title":"0.15.0 (2021-08-09)","text":"TypeDescriptionPRIssuesAuthor Feature  add `shut mono|pkg status --json --include-config` options@NiklasRosenstein"},{"location":"changelog/#0143-2021-08-08","title":"0.14.3 (2021-08-08)","text":"TypeDescriptionPRIssuesAuthor Fix  fix `VendoredRequirement._normpath()` which corrupted absolute paths on Windows (e.g. `C:/path/to` would be converted to `./C:\\path\\to` when it should just be `C:\\path\\to`). This caused `shut pkg install` on Windows to fail.@NiklasRosenstein Fix  `No module named setuptools` error when using `shut pkg install` in venv on WindowsNiklasRosenstein/shut#16@NiklasRosenstein Fix  fix additional CR in generated `LICENSE.txt` on Windows when installing Shut from sourceNiklasRosenstein/shut#17@NiklasRosenstein Fix  `py.typed` file is rendered into `MANIFEST.in` with backslashes@NiklasRosenstein"},{"location":"changelog/#0142-2021-08-03","title":"0.14.2 (2021-08-03)","text":"TypeDescriptionPRIssuesAuthor Improvement  update how install hooks are rendered into `setup.py`@NiklasRosenstein"},{"location":"changelog/#0141-2021-07-23","title":"0.14.1 (2021-07-23)","text":"TypeDescriptionPRIssuesAuthor Fix  `TypeError` when using --extra and --dev/--test@NiklasRosenstein"},{"location":"changelog/#0140-2021-07-22","title":"0.14.0 (2021-07-22)","text":"TypeDescriptionPRIssuesAuthor Feature  add `--dev/--no-dev` and `--test/--no-test` options to `shut mono install` and `shut pkg install`@NiklasRosenstein"},{"location":"changelog/#0133-2021-06-20","title":"0.13.3 (2021-06-20)","text":"TypeDescriptionPRIssuesAuthor Fix  exclude python requirements when rendering `requirements.txt`@NiklasRosenstein"},{"location":"changelog/#0132-2021-06-20","title":"0.13.2 (2021-06-20)","text":"TypeDescriptionPRIssuesAuthor Fix  fix format of requirements in requirements.txt@NiklasRosenstein"},{"location":"changelog/#0131-2021-06-20","title":"0.13.1 (2021-06-20)","text":"TypeDescriptionPRIssuesAuthor Fix  also install `PackageModel.test_requirements` on `shut pkg install`@NiklasRosenstein"},{"location":"changelog/#0130-2021-06-20","title":"0.13.0 (2021-06-20)","text":"TypeDescriptionPRIssuesAuthor Feature  add `PackageModel.dev_requirements` which will be installed with `shut pkg install`@NiklasRosenstein Feature  add `PackageModel.render_requirements_txt` which will be rendered with `shut pkg update`@NiklasRosenstein"},{"location":"changelog/#0120-2021-06-08","title":"0.12.0 (2021-06-08)","text":"TypeDescriptionPRIssuesAuthor Improvement  allow running Shut via `python -m shut`@NiklasRosenstein Fix  fix call to `run_install()` in `shut mono install`@NiklasRosenstein"},{"location":"changelog/#0114-2021-02-01","title":"0.11.4 (2021-02-01)","text":"TypeDescriptionPRIssuesAuthor Fix  `shut pkg install` now correctly installs transitive package interdependencies in the right order@NiklasRosenstein"},{"location":"changelog/#0113-2021-01-29","title":"0.11.3 (2021-01-29)","text":"TypeDescriptionPRIssuesAuthor Fix  fix error rendering `setup.py` if the license file did not exist@NiklasRosenstein Feature  add `get-version` command to `shut mono` and `shut pkg`@NiklasRosenstein Fix  `shut pkg requirements add` now adds the InstallConfiguration pip args@NiklasRosenstein"},{"location":"changelog/#0112-2020-12-19","title":"0.11.2 (2020-12-19)","text":"TypeDescriptionPRIssuesAuthor Fix  fix license_file relative path generation in setuptools renderer, now correctly inherits the license file from the monorepo@NiklasRosenstein"},{"location":"changelog/#0111-2020-12-04","title":"0.11.1 (2020-12-04)","text":"TypeDescriptionPRIssuesAuthor Fix  fix error in `setuptools` renderer if no license is configured in the package@NiklasRosenstein"},{"location":"changelog/#0110-2020-12-03","title":"0.11.0 (2020-12-03)","text":"TypeDescriptionPRIssuesAuthor Feature  add `$.package-data` field to `package.yml`@NiklasRosenstein Fix  add missing package data that needs to be packaged with `shut`@NiklasRosenstein"},{"location":"changelog/#0103-2020-11-27","title":"0.10.3 (2020-11-27)","text":"TypeDescriptionPRIssuesAuthor Fix  referencing a LICENSE or README outside the package directory now does not fail on install if the source file does not exist, but it will print a warning@NiklasRosenstein"},{"location":"changelog/#0102-2020-11-27","title":"0.10.2 (2020-11-27)","text":"TypeDescriptionPRIssuesAuthor Fix  add `PackageModel.license_file` and fix license rendering into MANIFEST.in and setup.py@NiklasRosenstein"},{"location":"changelog/#0101-2020-11-27","title":"0.10.1 (2020-11-27)","text":"TypeDescriptionPRIssuesAuthor Fix  remove debug print in \"package-url\" check@NiklasRosenstein"},{"location":"changelog/#0100-2020-11-27","title":"0.10.0 (2020-11-27)","text":"TypeDescriptionPRIssuesAuthor Feature  packages now inherit the monorepos license if it is unset (using PackageModel.get_license())@NiklasRosenstein Feature  If a package inherits the monoreop license, the LICENSE file will not be replicated in the package directory but instead be copied from the monorepo (using `_tempcopy()` in `setup.py`)@NiklasRosenstein Feature  `shut {mono,pkg} update` commands now produce a LICENSE.txt file if a license template exists for the specified license (currently only `MIT`)@NiklasRosenstein Feature  packages now inherit the monorepo `author` and `url`, and `version` if `release.single_version == True`@NiklasRosenstein Feature  add \"shut pkg format\" command@NiklasRosenstein Feature  package `author` and `url` are now inherited from the monorepo@NiklasRosenstein"},{"location":"changelog/#090-2020-11-20","title":"0.9.0 (2020-11-20)","text":"TypeDescriptionPRIssuesAuthor Fix  cli: Fix `shut mono bump` not updating requirements in package `setup.py` if packages have inter dependenciesNiklasRosenstein/shut#7@NiklasRosenstein Feature  shut.model.package: Add `$.install.index-url` and `$.install.extra-index-urls` fields@NiklasRosenstein Feature  cli: `shut pkg install` now supports `$.install.index-url` and `$.install.extra-index-urls`, added a `--pipx` option@NiklasRosenstein Feature  checks: Add check for namespace files@NiklasRosenstein Fix  fix order of dependencies in the same mono repository when using `shut pkg install`@NiklasRosenstein"},{"location":"changelog/#080-2020-09-09","title":"0.8.0 (2020-09-09)","text":"TypeDescriptionPRIssuesAuthor Feature  cli: Add `shut ... test --keep-test-env` option@NiklasRosenstein Feature  shut.test.base: Add `TestStatus.SKIPPED` enumeration value@NiklasRosenstein Fix  shut.test.pytest: Support skipped tests instead of failing ungracefully@NiklasRosenstein Feature  cli: Support skipped tests `shut ... test` output@NiklasRosenstein"},{"location":"changelog/#073-2020-09-09","title":"0.7.3 (2020-09-09)","text":"TypeDescriptionPRIssuesAuthor Fix  cli: Fix `AttributeError` when running `shut mono bump --snapshot`@NiklasRosenstein"},{"location":"changelog/#072-2020-09-08","title":"0.7.2 (2020-09-08)","text":"TypeDescriptionPRIssuesAuthor Fix  cli: Fix `shut pkg install` command@NiklasRosenstein"},{"location":"changelog/#071-2020-09-08","title":"0.7.1 (2020-09-08)","text":"TypeDescriptionPRIssuesAuthor Feature  shore.models.monorepo: Add `Monorepo.get_inter_dependencies_graph()`@NiklasRosenstein Fix  cli: `shut mono install` now uses topological order to retrieve package requirements@NiklasRosenstein"},{"location":"changelog/#070-2020-09-08","title":"0.7.0 (2020-09-08)","text":"TypeDescriptionPRIssuesAuthor Improvement  cli: Removed `-a,--all` flag from `shut mono update`, the command now always behaves like that flag is set@NiklasRosenstein Feature  cli: Add `shut mono update` flags `--verify` and `--verify-tag`@NiklasRosenstein Fix  shut.renderers.setuptools: Fix rendering of `extras_require`@NiklasRosenstein Feature  cli: Add `shut mono install` command@NiklasRosenstein"},{"location":"changelog/#060-2020-09-08","title":"0.6.0 (2020-09-08)","text":"TypeDescriptionPRIssuesAuthor Feature  shut.changelog: Add `breaking_change` Changelog type@NiklasRosenstein Feature  cli: `shut ... bump` command without version argument or bump mode option will determine the bump mode from the unreleased changelog@NiklasRosenstein Improvement  shore.model: `dump()` method now uses `nr.fs.atomic_file` to ensure the original file contents are not modified if the dump operation fails@NiklasRosenstein Improvement  shore.model.requirements: Add `BaseRequirement` and `VendoredRequirement` classes, require databind.core and databind.json ^0.4.0 for the `@datamodel(serialize_as)` feature@NiklasRosenstein Feature  shut.model.package: `Package.requirements` and related properties are now of type `BaseRequirement`, allowing the use of `VendoredRequirement`s@NiklasRosenstein Improvement  cli: `shut pkg build` and `shut pkg publish` will now error if the package uses vendored requirements@NiklasRosenstein Feature  cli: `shut pkg requirements add` now supports adding vendored requirements using the `-v,--vendor` option@NiklasRosenstein Improvement  shut.model.package: Use new `RequirementsList` class instead of `List[BaseRequirement]`@NiklasRosenstein Feature  shut.model.requirements: `Requirement` now supports package extras@NiklasRosenstein Feature  cli: Add `--verify` option to `shut pkg update`@NiklasRosenstein Feature  shut.checkers.package: Add `up to date` check for packages@NiklasRosenstein Feature  cli: `shut pkg install` now supports installing vendored requirements@NiklasRosenstein Fix  shut.renderers.setuptools: Fix error when package author was not set@NiklasRosenstein Improvement  shut.checkers: Change Checkers interface (remove `project` argument)@NiklasRosenstein Feature  cli: `shut pkg bump` now prevents bumping if managed files are outdated@NiklasRosenstein Fix  cli: `shut pkg bump` now prevents bumping if package version is managed by a monorepo single-version (as was previously already expected to happen)@NiklasRosenstein Improvement  cli: `shut mono bump` now includes the packages in the mono repo if `$.release.single-version` is enabled@NiklasRosenstein Improvement  shut.checkers.monorepo: remove `bad-package-directory` check again, having a package name differ from the directory name is a valid use case@NiklasRosenstein Feature  cli: Add `shut mono publish` command which delegates to `shut pkg publish`.@NiklasRosenstein Improvement  shut.publishers.warehouse: The `WarehouseProvider` now uses the new `PackageModel.get_publish_conf()` instead of `PackageModel.publish` directly, allowing packages to inherit the publish configuration of the mono repository@NiklasRosenstein"},{"location":"changelog/#055-2020-09-05","title":"0.5.5 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Improvement  shut.test.pytest: set altname for `PytestDriver.report_file` to `report-file`@NiklasRosenstein Improvement  cli: `shut mono test` now prints a summary of the status for every tested package@NiklasRosenstein"},{"location":"changelog/#054-2020-09-05","title":"0.5.4 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Improvement  shut.test.pytest: `PytestDriver.args` option now defaults to `[\"-vv\"]`@NiklasRosenstein Feature  cli: Add `shut mono test --only` option@NiklasRosenstein"},{"location":"changelog/#053-2020-09-05","title":"0.5.3 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Feature  cli: Support `VIRTUALENV` and `PIP` environment variables in `shut pkg test` and `shut mono test`@NiklasRosenstein"},{"location":"changelog/#052-2020-09-05","title":"0.5.2 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Feature  cli: add `--checks/--no-checks` toggle to `shut pkg` and `shut mono` commands@NiklasRosenstein Fix  shut.test.pytest: Fix parsing of Pytest JSON record for test functions from a `unittest.TestCase` subclass@NiklasRosenstein"},{"location":"changelog/#051-2020-09-05","title":"0.5.1 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Fix  cli: fix running \"shut pkg install\" from inside \"shut pkg test --isolate\" call@NiklasRosenstein"},{"location":"changelog/#050-2020-09-05","title":"0.5.0 (2020-09-05)","text":"TypeDescriptionPRIssuesAuthor Improvement  shut.model.package: Remove `PackageData` class, merge it's members into `PackageModel` (this does not change the interface of `PackageModel`), Removed `PackageModel.data` property@NiklasRosenstein Tests  fix unit tests@NiklasRosenstein Improvement  shore.checkers.package: `package-author` check is now an error level check@NiklasRosenstein Improvement  cli: `shut mono bump` and `shut pkg bump` no longer run checks, the command group already does it@NiklasRosenstein Fix  shut.renderers.setuptools: fix rendering of `python_requires` option in `setup.py` if package is universal (i.e. the `python` requirement uses an OR (|) which we cannot currently translate to setuptools correctly)@NiklasRosenstein Feature  cli: add `shut pkg test` command which and `PackageModel.test_driver` configuration, the `shore.test` sub-package implements test drivers (currently just `pytest`)@NiklasRosenstein Feature  cli: add `shut mono test` command@NiklasRosenstein"},{"location":"changelog/#040-2020-09-04","title":"0.4.0 (2020-09-04)","text":"TypeDescriptionPRIssuesAuthor Improvement  cli: Updated temrinal output of `shut ... checks`@NiklasRosenstein Improvement  shut.model.package: Add `PackageError` exception class@NiklasRosenstein Improvement  shut.checkers.monorepo: Add `bad-package-directory` check to Monorepo checker@NiklasRosenstein Improvement  cli: `shut pkg checks` now inherits checks from the Monorepo if the check result targets the package directly (e.g. the `bad-package-directory` check)@NiklasRosenstein Improvement  shut.checkers.core: Add `CheckResult.subject` member (default: `None`)@NiklasRosenstein Improvement  cli: `shut pkg` and `shut mono` commands will now print failed checks to stderr before executing the requested subcommand.@NiklasRosenstein Improvement  shut.checkers.monorepo: include error message in `invalid-package` check result@NiklasRosenstein Improvement  shut.checkers.generic: `unknown-config-options` check no longer shows if it passes@NiklasRosenstein Improvement  shut.checkers.generic: rename `unknown-config` check to `unknown-config-options`@NiklasRosenstein Improvement  cli: no longer set `PYTHONWARNINGS` environment variable@NiklasRosenstein Improvement  shut.model.monorepo: add `Monorepo.get_inter_dependencies_for()` method@NiklasRosenstein Feature  cli: add `shut pkg install` command@NiklasRosenstein"},{"location":"changelog/#030-2020-08-29","title":"0.3.0 (2020-08-29)","text":"TypeDescriptionPRIssuesAuthor Improvement  update Changelog typing for databind@NiklasRosenstein Improvement  update paths printed in `shut ... bump` when changelog is released@NiklasRosenstein"},{"location":"changelog/#020-2020-08-29","title":"0.2.0 (2020-08-29)","text":"TypeDescriptionPRIssuesAuthor Docs  fix README example@NiklasRosenstein"},{"location":"configuration/","title":"Configuration","text":"<p>The Slap configuration is read either from a <code>slap.toml</code> file or from the <code>[tool.slap]</code> section in <code>pyproject.toml</code>.</p> <p>Note</p> <p>A <code>slap.toml</code> configuration file is usually only used at the project root in case of mono-repositories for multiple Python projects. The file is often used to</p> <ul> <li>disable mono-repository level changelogs (<code>slap changelog</code>)</li> <li>configure global tests or commands (<code>slap run</code>, <code>slap test</code>)</li> <li>global version references (<code>slap release</code>)</li> </ul> <p>In this section, we describe the global configuration options that affect Slap directly and are not specifically tied to any single Slap command.</p> Option Type Default Description <code>typed</code> <code>bool | None</code> <code>None</code> Whether the Python code uses type hints. If not set, Slap acts as if this is not known. <code>disable</code> <code>list[str]</code> <code>[]</code> A list of Slap application plugins to disable. <code>enable-only</code> <code>list[str]</code> <code>[]</code> A list of Slap application plugins to enable."},{"location":"configuration/#plugin-loading","title":"Plugin loading","text":"<p>All Slap commands are implemented as <code>ApplicationPlugin</code>s. By default, Slap will load plugin that is registered under the <code>slap.plugins.application</code> entrypoint, however plugins can be disabled using the <code>disable</code> option or an explicit list of plugins to load and none other can be set with <code>enable-only</code>.</p> <p>Restricting the plugins to load will impact the set of commands available at your disposal through the Slap CLI.</p>"},{"location":"getting-started/","title":"Getting started","text":""},{"location":"getting-started/#1-installation","title":"1. Installation","text":"<p>I recommend installing Slap using Pipx. (Requires Python 3.10 or higher)</p> <pre><code>$ pipx install slap-cli\n</code></pre>"},{"location":"getting-started/#2-bootstrapping-a-new-project","title":"2. Bootstrapping a new project","text":"<p>Slap has an <code>init</code> command that bootstraps project files for you. You can preview what the generated files look like by checking out the init command's documentation.</p> <p>Using this command to start a project from scratch is entirely optional and you may use <code>poetry new</code> or <code>flit init</code> instead, or just write everything from scratch.</p> <p>Currently, it provides only a template for projects using Poetry as the build-backend and the template is rather opinionated (i.e. it tells Slap that the project uses typing and the default test commands use Mypy and Pytest).</p> <pre><code>$ mkdir my_package; cd my_package\n$ slap init --name my_package\nwrite /home/niklas/git/my_package/pyproject.toml\nwrite /home/niklas/git/my_package/LICENSE\nwrite /home/niklas/git/my_package/readme.md\nwrite /home/niklas/git/my_package/.gitignore\nwrite /home/niklas/git/my_package/src/my_package/__init__.py\nwrite /home/niklas/git/my_package/test/test_import.py\nwrite /home/niklas/git/my_package/src/my_package/py.typed\n</code></pre> <p>Note</p> <p>You can include dots (<code>.</code>) in the <code>--name</code> argument value to bootstrap for a PEP 420 implicit namespace package, such as <code>$ slap init --name databind.core</code>.</p>"},{"location":"getting-started/#3-creating-a-virtual-environment","title":"3. Creating a virtual environment","text":"<p>Slap's <code>venv</code> command is a small but convenient tool to create, activate and delete Python virtual environments with the same-named standard library module.</p> <p>In order to use it's activate feature, you need to set up a shell function that shadow's the <code>slap</code> command. For details on how to do this, follow the instructions in the venv command's documentation.</p> <pre><code>$ slap venv -ac 3.10\ncreating local environment \"3.10\" (using python3.10)\nactivating local environment \"3.10\"\n(3.10) $\n</code></pre> <p>Note</p> <p>Combining the <code>-a,--activate</code> and <code>-c,--create</code> options will create and subsequently activate the environment.</p> <p>Without a <code>-p,--python</code> argument, the Python version is derived from the environment name as <code>\"python\" + name</code>.</p>"},{"location":"getting-started/#4-install-your-package-into-the-environment","title":"4. Install your package into the environment","text":"<p>Whether you only just bootstrapped your project files or you cloned an existing Python project, before you can use or test it locally, you need to install it into the virtual environment created in the previous step. The <code>install</code> command will use Pip to install your package and all of its dependencies.</p> <p>You are not required to use Slap's <code>venv</code> command for this step, you can be in any kind of Python virtual environment.</p> <p>Note</p> <p>Using the <code>--link</code> option will symlink your package into the Python environment instead of installing it with Pip, allowing you to make edits to your source code without needing to re-install it after every change. If all your dependencies are already installed, you can also use the <code>slap link</code> command to only do the linking step (this is also convenient if only your project's entry points have changed).</p> <pre><code>(3.10) $ slap install --link\n... pip install output here ...\nsymlinking my_package\n</code></pre> <p>If you are not currently in a virtual environment, Slap will refuse to install unless you pass the <code>--no-venv-check</code> option. This is to protect you from accidentally installing into a global Python installation.</p> <pre><code>(3.10) $ deactivate\n$ slap install\nerror: refusing to install because you are not in a virtual environment\n       enter a virtual environment or use --no-venv-check\n</code></pre> <p>Note</p> <p>The <code>slap install</code> command will by default install all run dependencies, as well as development dependencies and any extra dependencies. You can change this behaviour with any of the <code>--only-extras</code>, <code>--extras</code> and <code>--no-dev</code> options. You can also install only dependencies and not your actual project by passing the <code>--no-root</code> option.</p> <p>Check out the install command's documentation for more information.</p>"},{"location":"getting-started/#5-inspect-what-slap-knows-about-your-project","title":"5. Inspect what Slap knows about your project","text":"<p>At times, the <code>info</code> command comes in handy to get a better understanding how Slap sees your project.</p> <code>slap info</code> for Slap's project $ slap info<pre><code>@shell cd .. &amp;&amp; slap info\n</code></pre>"},{"location":"getting-started/#6-sanity-check-your-project-configuration","title":"6. Sanity check your project configuration","text":"<p>The <code>slap check</code> command provides some feedback on the sanity of your project configuration. The below example is the check output for Slap's own project.</p> $ slap check<pre><code>@shell cd .. &amp;&amp; slap check\n</code></pre> <p>Note</p> <p>\ud83d\udc4b Please feel free to create a GitHub Issue if you any suggestions on new types of checks to add or to improve any of the existing checks. </p>"},{"location":"getting-started/#7-run-tests","title":"7. Run tests","text":"<p>The <code>test</code> command runs the commands configured in your <code>pyproject.toml</code> configuration under the <code>[tool.slap.test]</code> section. It is common to include <code>slap check</code> as one of the tests, as well as static type checking and unit tests.</p> <p>If you bootstrapped your project with Slap, you will already have some test commands set up. Otherwise, consider adding test commands like the below example to your project configuration.</p> Example pyproject.toml<pre><code>[tool.slap.test]\ncheck = \"slap check\"\nmypy = \"mypy src/\"\npytest = \"pytest test/\"\n</code></pre> <code>slap test</code> for Slap's project $ slap test<pre><code>@shell cd .. &amp;&amp; slap test\n</code></pre>"},{"location":"getting-started/#8-run-commands","title":"8. Run commands","text":"<p>Inspired by <code>npm run</code> and <code>yarn run</code>, <code>slap run</code> is likewise a simple tool to run aliased commands in your project configuration. For example, Slap uses the following aliases that can be run with <code>slap run docs:dev</code> and <code>slap run docs:build</code>, respectively.</p> <pre><code>[tool.slap.run]\n\"docs:build\" = \"cd docs &amp;&amp; novella --base-url slap/\"\n\"docs:dev\" = \"cd docs &amp;&amp; novella --serve\"\n</code></pre>"},{"location":"getting-started/#9-add-a-changelog-entry","title":"9. Add a changelog entry","text":"<p>Slap provides a format for storing changelogs in a structure way. You can add entries to the changelog using the <code>slap changelog add</code> command. A changelog entry contains at a minimum contains a type, description and one or more authors. An entry may also be associated with one or more issues and/or a Pull Request (stored as URLs).</p> <p>Note</p> <p>If your repository is hosted on GitHub, you can use issue and PR numbers and they will be automatically converted to full URLs. If you don't supply an <code>-a,--author</code> option, your Git email will be used. In case of a GitHub repository, that email address will be converted to a Git username instead.</p> Example <pre><code>$ slap changelog add -t improvement -cd 'Add this cool new feature' --issue 52\nid = \"9fad16b6-9da7-49a1-9c4d-63dbf6c8eae9\"\ntype = \"improvement\"\ndescription = \"Add this cool new feature\"\nauthor = \"@NiklasRosenstein\"\nissues = [\n    \"https://github.com/NiklasRosenstein/slap/issues/52\",\n]\n\n[develop 1a131e2] improvement: Add this cool new feature\n 1 file changed, 8 insertions(+)\n create mode 100644 .changelog/_unreleased.toml\n</code></pre> <p>Tip</p> <p>The <code>slap changelog update-pr</code> command can be used to add the <code>pr</code> URL to all changelog entries added between two Git revisions. If used from a CI job, you can automate the addition of the <code>pr</code> field when a PR is opened instead of manually having to add the URL after the PR was created.</p> <p>If your repository is hosted on GitHub, all you need to do is set up the  <code>NiklasRosenstein/slap@gha/changelog/update/v1</code> action.</p>"},{"location":"getting-started/#10-create-a-release","title":"10. Create a release","text":"<p>Slap's <code>release</code> command updates version numbers in you code base and can also commit the changes, tag them and push them to the Git remote. It can also be used to validate that all version references in your project are the same.</p> <p>Supported version locations</p> <p>Slap supports a few places where the version number of your project is hardcoded by default. You can always let Slap know about any other places by configuring additional version references (see the release's commands Configuration documentation).</p> <ul> <li>The <code>version</code> in your <code>pyproject.toml</code> (for Flit or Poetry) or <code>setup.cfg</code> (for Setuptools)</li> <li>The <code>__version__</code> in your Python source code</li> <li>Dependencies on other packages in the same mono-repository (aka. inter-dependencies)</li> </ul> <p>The <code>release</code> command will also automatically update the currently staged changelog entries in <code>.changelog/_unreleased.toml</code> by inserting the current date as the release date and renaming the file to <code>.changelog/{version}.toml</code>.</p> Example  To create a new release, pass the version number or a rule name instead.  $ slap release --tag --push patch<pre><code>@shell cd .. &amp;&amp; slap release --dry --tag --push patch --no-branch-check --no-worktree-check 2&gt;/dev/null\n</code></pre> <p>Tip</p> <p>You can also use the <code>--validate</code> flag to validate and show all known version number references:</p> <p>``` title=\"$ slap release --validate\"</p> <p>@shell cd .. &amp;&amp; slap release --validate :with prefix = \"    \" @     ```</p>"},{"location":"getting-started/#11-publish-to-pypi","title":"11. Publish to PyPI","text":"<p>The <code>publish</code> command builds distributions using your configured build backend and publishes them to a Python package index using Twine. For mono repositories, the command will build all projects before publishing them.</p> $ slap publish<pre><code>Build slap-cli\n  slap-cli-1.4.0.tar.gz\n  slap_cli-1.4.0-py3-none-any.whl\nPublishing\n</code></pre> <p>Note</p> <p>It is recommended that you perform this step only after you created a new release and all your CI checks have passed. Even better, you can configure your CI to publish the package for your once all checks have passed. You can pass the credentials to the <code>-u,--username</code> and <code>-p,--password</code> options just as with the Twine CLI.</p>"},{"location":"glossary/","title":"Glossary","text":""},{"location":"glossary/#project","title":"Project","text":"<p>At it's core, any directory can be a \"project\", but most projects would have a <code>pyproject.toml</code> or <code>slap.toml</code> configuration file. Most commonly, it will have a <code>pyproject.toml</code> file that contains the Slap configuration under the <code>[tool.slap]</code> namespace. Many concepts in Slap are attached directly to a project. For example if the project has a <code>pyproject.toml</code>, it is considered a Python project, and Python projects can have packages that can be installed, built or published to PyPI or another repository.</p> <p>A project with a <code>slap.toml</code> configuration file (or with no configuration file) is usually used as the parent project for two or more sub-projects. This configuration represents a mono-repository where multiple projects are stored and versioned together.</p> <p>Slap understands most details about a project through a <code>ProjectHandlerPlugin</code>. It comes with a default implementation that supports Poetry and Flit Python projects.</p>"},{"location":"glossary/#repository","title":"Repository","text":"<p>A repository is a directory that contains one or more projects. For singular projects, the repository directory is the same as the project directory. For a mono-repository configuration, any directory that contains multiple projects is considered the repository directory (it usually contains a <code>slap.toml</code> configuration file).</p> <p>Note that the repository directory is also considered a project directory, but if it isn't also a Python project (i.e. if it has a <code>pyproject.toml</code> instead of a <code>slap.toml</code>) it will be ignored for most Slap commands.</p> <p>=== \"Single project\"</p> <pre><code>```\nmy_pacakge/                           -&gt; Repository / Project \"my_package\"\n  pyproject.toml\n  readme.md\n  src/\n  tests/\n```\n</code></pre> <p>=== \"Mono repository\"</p> <pre><code>```\n/                                     -&gt; Repository / Project \"$\"\n  my_first_package/                   -&gt; Project \"my_first_package\"\n    pyproject.toml\n    readme.md\n    src/\n    tests/\n  my_second_package/                  -&gt; Project \"my_second_package\"\n    pyproject.toml\n    readme.md\n    src/\n    tests/\n  slap.toml\n```\n</code></pre> <p>Slap understands most details about a repository through a <code>RepositoryHandlerPlugin</code>. It comes with a default implementation that supports Git repositories and GitHub.</p>"},{"location":"api/documentation/","title":"API Documentation","text":""},{"location":"api/documentation/#slap.application.Application","title":"slap.application.Application","text":"<p>The application object is the main hub for command-line interactions. It is responsible for managing the project that is the main subject of the command-line invokation (or multiple of such), provide the #cleo command-line application that #ApplicationPlugin#s can register commands to, etc.</p> Source code in <code>slap/application.py</code> <pre><code>class Application:\n    \"\"\"The application object is the main hub for command-line interactions. It is responsible for managing the project\n    that is the main subject of the command-line invokation (or multiple of such), provide the #cleo command-line\n    application that #ApplicationPlugin#s can register commands to, etc.\"\"\"\n\n    main_project: Once[Project | None]\n\n    #: The application configuration loaded once via #get_application_configuration().\n    config: Once[ApplicationConfig]\n\n    #: The cleo application to which new commands can be registered via #ApplicationPlugin#s.\n    cleo: CleoApplication\n\n    def __init__(self, directory: Path | None = None, name: str = \"slap\", version: str = __version__) -&gt; None:\n        from slap.util.once import Once\n\n        self._directory = directory or Path.cwd()\n        self._repository: t.Optional[Repository] = None\n        self._plugins_loaded = False\n        self.config = Once(self._get_application_configuration)\n        self.cleo = CleoApplication(self._cleo_init, name, version)\n        self.main_project = Once(self._get_main_project)\n\n    @property\n    def repository(self) -&gt; Repository:\n        \"\"\"Return the Slap repository that is the subject of the current application. There may be command plugins\n        that do not require the repository to function, so this property creates the repository lazily.\"\"\"\n\n        if self._repository is None:\n            self._repository = find_repository(self._directory)\n\n        return self._repository\n\n    def _get_application_configuration(self) -&gt; ApplicationConfig:\n        \"\"\"Loads the application-level configuration.\"\"\"\n\n        from databind.core.settings import ExtraKeys\n        from databind.json import load\n\n        raw_config = self.repository.raw_config().get(\"application\", {})\n        return load(raw_config, ApplicationConfig, settings=[ExtraKeys(True)])\n\n    def _get_main_project(self) -&gt; Project | None:\n        \"\"\"Returns the main project, which is the one that the current working directory is pointing to.\"\"\"\n\n        cwd = Path.cwd()\n\n        for project in self.repository.projects():\n            path = project.directory.resolve()\n            if path == cwd:\n                return project\n\n        return None\n\n    def configurations(self, targets_only: bool = False) -&gt; list[Configuration]:\n        \"\"\"Return a list of all configuration objects, i.e. all projects and eventually the #Repository, unless one\n        project is from the same directory as the repository.\"\"\"\n\n        result: list[Configuration] = list(self.get_target_projects() if targets_only else self.repository.projects())\n        if self.repository.directory not in tuple(p.directory for p in self.repository.projects()):\n            result.insert(0, self.repository)\n        return result\n\n    def load_plugins(self) -&gt; None:\n        \"\"\"Loads all application plugins (see #ApplicationPlugin) and activates them.\n\n        By default, all plugins available in the `slap.application.ApplicationPlugin` entry point group are loaded. This\n        behaviour can be modified by setting either the `[tool.slap.plugins.disable]` or `[tool.slap.plugins.enable]`\n        configuration option (without the `tool.slap` prefix in case of a `slap.toml` configuration file). The default\n        plugins delivered immediately with Slap are enabled by default unless disabled explicitly with the `disable`\n        option.\"\"\"\n\n        from slap.plugins import ApplicationPlugin\n        from slap.util.plugins import iter_entrypoints\n\n        assert not self._plugins_loaded\n        self._plugins_loaded = True\n\n        config = self.config()\n        disable = config.disable or []\n\n        logger.debug(\"Loading application plugins\")\n\n        for plugin_name, loader in iter_entrypoints(ApplicationPlugin):  # type: ignore[type-abstract]\n            if plugin_name in disable:\n                continue\n            try:\n                plugin = loader()(self)\n            except Exception:\n                logger.exception(\"Could not load plugin &lt;subj&gt;%s&lt;/subj&gt; due to an exception\", plugin_name)\n            else:\n                plugin_config = plugin.load_configuration(self)\n                plugin.activate(self, plugin_config)\n\n    def _cleo_init(self, io: IO) -&gt; None:\n        self.load_plugins()\n\n    def run(self) -&gt; None:\n        \"\"\"Loads and activates application plugins and then invokes the CLI.\"\"\"\n\n        self.cleo.run()\n\n    def get_target_projects(\n        self, only_projects: str | t.Sequence[str] | None = None, cwd: Path | None = None\n    ) -&gt; list[Project]:\n        \"\"\"\n        Returns the list of projects that should be dealt with when executing a command. When there is a main project,\n        only the main project will be returned. When in the repository root, all projects will be returned.\n        \"\"\"\n\n        cwd = cwd or self._directory\n        if isinstance(only_projects, str):\n            only_projects = split_by_commata(only_projects)\n\n        if only_projects is not None:\n            projects: list[Project] = []\n            for only_project in only_projects:\n                project_path = (cwd / only_project).resolve()\n                matching_projects = [p for p in self.repository.projects() if p.directory.resolve() == project_path]\n                if not matching_projects:\n                    raise ValueError(f'error: \"{only_project}\" does not point to a project')\n                projects += matching_projects\n            return projects\n\n        main = self.main_project()\n        if main:\n            return [main]\n        if cwd == self.repository.directory:\n            return self.repository.get_projects_ordered()\n        return []\n</code></pre>"},{"location":"api/documentation/#slap.application.Application.repository","title":"repository  <code>property</code>","text":"<pre><code>repository: Repository\n</code></pre> <p>Return the Slap repository that is the subject of the current application. There may be command plugins that do not require the repository to function, so this property creates the repository lazily.</p>"},{"location":"api/documentation/#slap.application.Application.configurations","title":"configurations","text":"<pre><code>configurations(targets_only: bool = False) -&gt; list[Configuration]\n</code></pre> <p>Return a list of all configuration objects, i.e. all projects and eventually the #Repository, unless one project is from the same directory as the repository.</p> Source code in <code>slap/application.py</code> <pre><code>def configurations(self, targets_only: bool = False) -&gt; list[Configuration]:\n    \"\"\"Return a list of all configuration objects, i.e. all projects and eventually the #Repository, unless one\n    project is from the same directory as the repository.\"\"\"\n\n    result: list[Configuration] = list(self.get_target_projects() if targets_only else self.repository.projects())\n    if self.repository.directory not in tuple(p.directory for p in self.repository.projects()):\n        result.insert(0, self.repository)\n    return result\n</code></pre>"},{"location":"api/documentation/#slap.application.Application.get_target_projects","title":"get_target_projects","text":"<pre><code>get_target_projects(only_projects: str | Sequence[str] | None = None, cwd: Path | None = None) -&gt; list[Project]\n</code></pre> <p>Returns the list of projects that should be dealt with when executing a command. When there is a main project, only the main project will be returned. When in the repository root, all projects will be returned.</p> Source code in <code>slap/application.py</code> <pre><code>def get_target_projects(\n    self, only_projects: str | t.Sequence[str] | None = None, cwd: Path | None = None\n) -&gt; list[Project]:\n    \"\"\"\n    Returns the list of projects that should be dealt with when executing a command. When there is a main project,\n    only the main project will be returned. When in the repository root, all projects will be returned.\n    \"\"\"\n\n    cwd = cwd or self._directory\n    if isinstance(only_projects, str):\n        only_projects = split_by_commata(only_projects)\n\n    if only_projects is not None:\n        projects: list[Project] = []\n        for only_project in only_projects:\n            project_path = (cwd / only_project).resolve()\n            matching_projects = [p for p in self.repository.projects() if p.directory.resolve() == project_path]\n            if not matching_projects:\n                raise ValueError(f'error: \"{only_project}\" does not point to a project')\n            projects += matching_projects\n        return projects\n\n    main = self.main_project()\n    if main:\n        return [main]\n    if cwd == self.repository.directory:\n        return self.repository.get_projects_ordered()\n    return []\n</code></pre>"},{"location":"api/documentation/#slap.application.Application.load_plugins","title":"load_plugins","text":"<pre><code>load_plugins() -&gt; None\n</code></pre> <p>Loads all application plugins (see #ApplicationPlugin) and activates them.</p> <p>By default, all plugins available in the <code>slap.application.ApplicationPlugin</code> entry point group are loaded. This behaviour can be modified by setting either the <code>[tool.slap.plugins.disable]</code> or <code>[tool.slap.plugins.enable]</code> configuration option (without the <code>tool.slap</code> prefix in case of a <code>slap.toml</code> configuration file). The default plugins delivered immediately with Slap are enabled by default unless disabled explicitly with the <code>disable</code> option.</p> Source code in <code>slap/application.py</code> <pre><code>def load_plugins(self) -&gt; None:\n    \"\"\"Loads all application plugins (see #ApplicationPlugin) and activates them.\n\n    By default, all plugins available in the `slap.application.ApplicationPlugin` entry point group are loaded. This\n    behaviour can be modified by setting either the `[tool.slap.plugins.disable]` or `[tool.slap.plugins.enable]`\n    configuration option (without the `tool.slap` prefix in case of a `slap.toml` configuration file). The default\n    plugins delivered immediately with Slap are enabled by default unless disabled explicitly with the `disable`\n    option.\"\"\"\n\n    from slap.plugins import ApplicationPlugin\n    from slap.util.plugins import iter_entrypoints\n\n    assert not self._plugins_loaded\n    self._plugins_loaded = True\n\n    config = self.config()\n    disable = config.disable or []\n\n    logger.debug(\"Loading application plugins\")\n\n    for plugin_name, loader in iter_entrypoints(ApplicationPlugin):  # type: ignore[type-abstract]\n        if plugin_name in disable:\n            continue\n        try:\n            plugin = loader()(self)\n        except Exception:\n            logger.exception(\"Could not load plugin &lt;subj&gt;%s&lt;/subj&gt; due to an exception\", plugin_name)\n        else:\n            plugin_config = plugin.load_configuration(self)\n            plugin.activate(self, plugin_config)\n</code></pre>"},{"location":"api/documentation/#slap.application.Application.run","title":"run","text":"<pre><code>run() -&gt; None\n</code></pre> <p>Loads and activates application plugins and then invokes the CLI.</p> Source code in <code>slap/application.py</code> <pre><code>def run(self) -&gt; None:\n    \"\"\"Loads and activates application plugins and then invokes the CLI.\"\"\"\n\n    self.cleo.run()\n</code></pre>"},{"location":"api/documentation/#slap.plugins","title":"slap.plugins","text":""},{"location":"api/documentation/#slap.plugins.ApplicationPlugin","title":"ApplicationPlugin","text":"<p>               Bases: <code>Generic[T]</code>, <code>ABC</code></p> <p>A plugin that is activated on application load, usually used to register additional CLI commands.</p> Source code in <code>slap/plugins.py</code> <pre><code>class ApplicationPlugin(t.Generic[T], abc.ABC):\n    \"\"\"A plugin that is activated on application load, usually used to register additional CLI commands.\"\"\"\n\n    ENTRYPOINT = \"slap.plugins.application\"\n\n    def __init__(self, app: Application) -&gt; None:\n        pass\n\n    @abc.abstractmethod\n    def load_configuration(self, app: Application) -&gt; T:\n        \"\"\"Load the configuration of the plugin. Usually, plugins will want to read the configuration from the Slap\n        configuration, which is either loaded from `pyproject.toml` or `slap.toml`. Use #Application.raw_config\n        to access the Slap configuration.\"\"\"\n\n    @abc.abstractmethod\n    def activate(self, app: Application, config: T) -&gt; None:\n        \"\"\"Activate the plugin. Register a #Command to #Application.cleo or another type of plugin to\n        the #Application.plugins registry.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ApplicationPlugin.activate","title":"activate  <code>abstractmethod</code>","text":"<pre><code>activate(app: Application, config: T) -&gt; None\n</code></pre> <p>Activate the plugin. Register a #Command to #Application.cleo or another type of plugin to the #Application.plugins registry.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef activate(self, app: Application, config: T) -&gt; None:\n    \"\"\"Activate the plugin. Register a #Command to #Application.cleo or another type of plugin to\n    the #Application.plugins registry.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ApplicationPlugin.load_configuration","title":"load_configuration  <code>abstractmethod</code>","text":"<pre><code>load_configuration(app: Application) -&gt; T\n</code></pre> <p>Load the configuration of the plugin. Usually, plugins will want to read the configuration from the Slap configuration, which is either loaded from <code>pyproject.toml</code> or <code>slap.toml</code>. Use #Application.raw_config to access the Slap configuration.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef load_configuration(self, app: Application) -&gt; T:\n    \"\"\"Load the configuration of the plugin. Usually, plugins will want to read the configuration from the Slap\n    configuration, which is either loaded from `pyproject.toml` or `slap.toml`. Use #Application.raw_config\n    to access the Slap configuration.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.CheckPlugin","title":"CheckPlugin","text":"<p>               Bases: <code>ABC</code></p> <p>This plugin type can be implemented to add custom checks to the <code>slap check</code> command. Note that checks will be grouped and their names prefixed with the plugin name, so that name does not need to be included in the name of the returned checks.</p> Source code in <code>slap/plugins.py</code> <pre><code>class CheckPlugin(abc.ABC):\n    \"\"\"This plugin type can be implemented to add custom checks to the `slap check` command. Note that checks will\n    be grouped and their names prefixed with the plugin name, so that name does not need to be included in the name\n    of the returned checks.\"\"\"\n\n    ENTRYPOINT = \"slap.plugins.check\"\n\n    def get_project_checks(self, project: Project) -&gt; t.Iterable[Check]:\n        return []\n\n    def get_application_checks(self, app: Application) -&gt; t.Iterable[Check]:\n        return []\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin","title":"ProjectHandlerPlugin","text":"<p>               Bases: <code>ABC</code></p> <p>A plugin that implements the core functionality of a project. Project handlers are intermediate layers between the Slap tooling and the actual project configuration, allowing different types of configurations to be adapted and used with Slap.</p> Source code in <code>slap/plugins.py</code> <pre><code>class ProjectHandlerPlugin(abc.ABC):\n    \"\"\"A plugin that implements the core functionality of a project. Project handlers are intermediate layers between\n    the Slap tooling and the actual project configuration, allowing different types of configurations to be adapted and\n    used with Slap.\"\"\"\n\n    ENTRYPOINT = \"slap.plugins.project\"\n\n    @abc.abstractmethod\n    def matches_project(self, project: Project) -&gt; bool:\n        \"\"\"Return `True` if the handler is able to provide data for the given project.\"\"\"\n\n    @abc.abstractmethod\n    def get_dist_name(self, project: Project) -&gt; str | None:\n        \"\"\"Return the distribution name for the project.\"\"\"\n\n    @abc.abstractmethod\n    def get_readme(self, project: Project) -&gt; str | None:\n        \"\"\"Return the readme file configured for the project.\"\"\"\n\n    @abc.abstractmethod\n    def get_packages(self, project: Project) -&gt; list[Package] | None:\n        \"\"\"Return a list of packages for the project. Return `None` to indicate that the project is expected to\n        not contain any packages.\"\"\"\n\n    @abc.abstractmethod\n    def get_dependencies(self, project: Project) -&gt; Dependencies:\n        \"\"\"Return the dependencies of the project.\"\"\"\n\n    def get_version(self, project: Project) -&gt; str | None:\n        \"\"\"Return the main project version string.\"\"\"\n\n        ref = next(iter(self.get_version_refs(project)), None)\n        return ref.value if ref else None\n\n    def get_version_refs(self, project: Project) -&gt; list[VersionRef]:\n        \"\"\"Allows the project handler to return additional version refs. Usually returns the version reference in\n        `pyproject.toml`.\"\"\"\n\n        return []\n\n    def add_dependency(self, project: Project, dependency: Dependency, where: str) -&gt; None:\n        \"\"\"Add a dependency to the project configuration.\n\n        Arguments:\n          project: The project to update.\n          dependency: The dependency to add.\n          where: The location of where to add the dependency. This is either `'run'`, `'dev'`, or otherwise\n            refers to the name of an extra requirement.\n        Raises:\n            NotImplementedError: If the operation is not supported by the project handler.\n        \"\"\"\n\n        raise NotImplementedError\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.add_dependency","title":"add_dependency","text":"<pre><code>add_dependency(project: Project, dependency: Dependency, where: str) -&gt; None\n</code></pre> <p>Add a dependency to the project configuration.</p> <p>Parameters:</p> Name Type Description Default <code>project</code> <code>Project</code> <p>The project to update.</p> required <code>dependency</code> <code>Dependency</code> <p>The dependency to add.</p> required <code>where</code> <code>str</code> <p>The location of where to add the dependency. This is either <code>'run'</code>, <code>'dev'</code>, or otherwise refers to the name of an extra requirement.</p> required <p>Raises:     NotImplementedError: If the operation is not supported by the project handler.</p> Source code in <code>slap/plugins.py</code> <pre><code>def add_dependency(self, project: Project, dependency: Dependency, where: str) -&gt; None:\n    \"\"\"Add a dependency to the project configuration.\n\n    Arguments:\n      project: The project to update.\n      dependency: The dependency to add.\n      where: The location of where to add the dependency. This is either `'run'`, `'dev'`, or otherwise\n        refers to the name of an extra requirement.\n    Raises:\n        NotImplementedError: If the operation is not supported by the project handler.\n    \"\"\"\n\n    raise NotImplementedError\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_dependencies","title":"get_dependencies  <code>abstractmethod</code>","text":"<pre><code>get_dependencies(project: Project) -&gt; Dependencies\n</code></pre> <p>Return the dependencies of the project.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_dependencies(self, project: Project) -&gt; Dependencies:\n    \"\"\"Return the dependencies of the project.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_dist_name","title":"get_dist_name  <code>abstractmethod</code>","text":"<pre><code>get_dist_name(project: Project) -&gt; str | None\n</code></pre> <p>Return the distribution name for the project.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_dist_name(self, project: Project) -&gt; str | None:\n    \"\"\"Return the distribution name for the project.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_packages","title":"get_packages  <code>abstractmethod</code>","text":"<pre><code>get_packages(project: Project) -&gt; list[Package] | None\n</code></pre> <p>Return a list of packages for the project. Return <code>None</code> to indicate that the project is expected to not contain any packages.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_packages(self, project: Project) -&gt; list[Package] | None:\n    \"\"\"Return a list of packages for the project. Return `None` to indicate that the project is expected to\n    not contain any packages.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_readme","title":"get_readme  <code>abstractmethod</code>","text":"<pre><code>get_readme(project: Project) -&gt; str | None\n</code></pre> <p>Return the readme file configured for the project.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_readme(self, project: Project) -&gt; str | None:\n    \"\"\"Return the readme file configured for the project.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_version","title":"get_version","text":"<pre><code>get_version(project: Project) -&gt; str | None\n</code></pre> <p>Return the main project version string.</p> Source code in <code>slap/plugins.py</code> <pre><code>def get_version(self, project: Project) -&gt; str | None:\n    \"\"\"Return the main project version string.\"\"\"\n\n    ref = next(iter(self.get_version_refs(project)), None)\n    return ref.value if ref else None\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.get_version_refs","title":"get_version_refs","text":"<pre><code>get_version_refs(project: Project) -&gt; list[VersionRef]\n</code></pre> <p>Allows the project handler to return additional version refs. Usually returns the version reference in <code>pyproject.toml</code>.</p> Source code in <code>slap/plugins.py</code> <pre><code>def get_version_refs(self, project: Project) -&gt; list[VersionRef]:\n    \"\"\"Allows the project handler to return additional version refs. Usually returns the version reference in\n    `pyproject.toml`.\"\"\"\n\n    return []\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ProjectHandlerPlugin.matches_project","title":"matches_project  <code>abstractmethod</code>","text":"<pre><code>matches_project(project: Project) -&gt; bool\n</code></pre> <p>Return <code>True</code> if the handler is able to provide data for the given project.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef matches_project(self, project: Project) -&gt; bool:\n    \"\"\"Return `True` if the handler is able to provide data for the given project.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ReleasePlugin","title":"ReleasePlugin","text":"<p>               Bases: <code>ABC</code></p> <p>This plugin type provides additional references to the project's version number allowing <code>slap release</code> to update these references to a new version number.</p> Source code in <code>slap/plugins.py</code> <pre><code>class ReleasePlugin(abc.ABC):\n    \"\"\"This plugin type provides additional references to the project's version number allowing `slap release` to\n    update these references to a new version number.\n    \"\"\"\n\n    ENTRYPOINT = \"slap.plugins.release\"\n\n    app: Application\n    io: IO\n\n    def get_version_refs(self, project: Project) -&gt; list[VersionRef]:\n        \"\"\"Return a list of occurrences of the project version.\"\"\"\n\n        return []\n\n    def create_release(\n        self, repository: Repository, project: Project | None, target_version: str, dry: bool\n    ) -&gt; t.Sequence[Path]:\n        \"\"\"Gives the plugin a chance to perform an arbitrary action after all version references have been bumped,\n        being informed of the target version. If *dry* is `True`, the plugin should only act as if it was performing\n        its usual actions but not commit the changes to disk. It should return the list of files that it modifies\n        or would have modified.\"\"\"\n\n        return []\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ReleasePlugin.create_release","title":"create_release","text":"<pre><code>create_release(repository: Repository, project: Project | None, target_version: str, dry: bool) -&gt; Sequence[Path]\n</code></pre> <p>Gives the plugin a chance to perform an arbitrary action after all version references have been bumped, being informed of the target version. If dry is <code>True</code>, the plugin should only act as if it was performing its usual actions but not commit the changes to disk. It should return the list of files that it modifies or would have modified.</p> Source code in <code>slap/plugins.py</code> <pre><code>def create_release(\n    self, repository: Repository, project: Project | None, target_version: str, dry: bool\n) -&gt; t.Sequence[Path]:\n    \"\"\"Gives the plugin a chance to perform an arbitrary action after all version references have been bumped,\n    being informed of the target version. If *dry* is `True`, the plugin should only act as if it was performing\n    its usual actions but not commit the changes to disk. It should return the list of files that it modifies\n    or would have modified.\"\"\"\n\n    return []\n</code></pre>"},{"location":"api/documentation/#slap.plugins.ReleasePlugin.get_version_refs","title":"get_version_refs","text":"<pre><code>get_version_refs(project: Project) -&gt; list[VersionRef]\n</code></pre> <p>Return a list of occurrences of the project version.</p> Source code in <code>slap/plugins.py</code> <pre><code>def get_version_refs(self, project: Project) -&gt; list[VersionRef]:\n    \"\"\"Return a list of occurrences of the project version.\"\"\"\n\n    return []\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryCIPlugin","title":"RepositoryCIPlugin","text":"<p>               Bases: <code>ABC</code></p> <p>This plugin type can be used with the <code>slap changelog update-pr -use &lt;plugin_name&gt;</code> option. It provides all the details derivable from the environment (e.g. environment variables available from CI builds) that can be used to detect which changelog entries have been added in a pull request, the pull request URL and the means to publish the changes back to the original repository.</p> Source code in <code>slap/plugins.py</code> <pre><code>class RepositoryCIPlugin(abc.ABC):\n    \"\"\"This plugin type can be used with the `slap changelog update-pr -use &lt;plugin_name&gt;` option. It provides all the\n    details derivable from the environment (e.g. environment variables available from CI builds) that can be used to\n    detect which changelog entries have been added in a pull request, the pull request URL and the means to publish\n    the changes back to the original repository.\n    \"\"\"\n\n    ENTRYPOINT = \"slap.plugins.repository_ci\"\n\n    io: IO\n\n    @abc.abstractmethod\n    def initialize(self) -&gt; None: ...\n\n    @abc.abstractmethod\n    def get_base_ref(self) -&gt; str: ...\n\n    def get_head_ref(self) -&gt; str | None:\n        return None\n\n    @abc.abstractmethod\n    def get_pr(self) -&gt; str: ...\n\n    @abc.abstractmethod\n    def publish_changes(self, changed_files: list[Path], commit_message: str) -&gt; None: ...\n\n    @staticmethod\n    def all() -&gt; dict[str, t.Callable[[], RepositoryCIPlugin]]:\n        \"\"\"Iterates over all registered automation plugins and returns a dictionary that maps\n        the plugin name to a factory function.\"\"\"\n\n        from slap.util.plugins import iter_entrypoints\n\n        result: dict[str, t.Callable[[], RepositoryCIPlugin]] = {}\n        for ep in iter_entrypoints(RepositoryCIPlugin.ENTRYPOINT):\n            result[ep.name] = partial(lambda ep: ep.load()(), ep)\n\n        return result\n\n    @staticmethod\n    def get(plugin_name: str, io: IO) -&gt; RepositoryCIPlugin:\n        \"\"\"Returns an instance of the plugin with given name, fully initialized.\n\n        Raises a #ValueError if the plugin does not exist.\"\"\"\n\n        plugins = RepositoryCIPlugin.all()\n        if plugin_name not in plugins:\n            raise ValueError(f\"plugin {RepositoryCIPlugin.ENTRYPOINT}:{plugin_name} does not exist\")\n\n        plugin = plugins[plugin_name]()\n        plugin.io = io\n        plugin.initialize()\n        return plugin\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryCIPlugin.all","title":"all  <code>staticmethod</code>","text":"<pre><code>all() -&gt; dict[str, Callable[[], RepositoryCIPlugin]]\n</code></pre> <p>Iterates over all registered automation plugins and returns a dictionary that maps the plugin name to a factory function.</p> Source code in <code>slap/plugins.py</code> <pre><code>@staticmethod\ndef all() -&gt; dict[str, t.Callable[[], RepositoryCIPlugin]]:\n    \"\"\"Iterates over all registered automation plugins and returns a dictionary that maps\n    the plugin name to a factory function.\"\"\"\n\n    from slap.util.plugins import iter_entrypoints\n\n    result: dict[str, t.Callable[[], RepositoryCIPlugin]] = {}\n    for ep in iter_entrypoints(RepositoryCIPlugin.ENTRYPOINT):\n        result[ep.name] = partial(lambda ep: ep.load()(), ep)\n\n    return result\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryCIPlugin.get","title":"get  <code>staticmethod</code>","text":"<pre><code>get(plugin_name: str, io: IO) -&gt; RepositoryCIPlugin\n</code></pre> <p>Returns an instance of the plugin with given name, fully initialized.</p> <p>Raises a #ValueError if the plugin does not exist.</p> Source code in <code>slap/plugins.py</code> <pre><code>@staticmethod\ndef get(plugin_name: str, io: IO) -&gt; RepositoryCIPlugin:\n    \"\"\"Returns an instance of the plugin with given name, fully initialized.\n\n    Raises a #ValueError if the plugin does not exist.\"\"\"\n\n    plugins = RepositoryCIPlugin.all()\n    if plugin_name not in plugins:\n        raise ValueError(f\"plugin {RepositoryCIPlugin.ENTRYPOINT}:{plugin_name} does not exist\")\n\n    plugin = plugins[plugin_name]()\n    plugin.io = io\n    plugin.initialize()\n    return plugin\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryHandlerPlugin","title":"RepositoryHandlerPlugin","text":"<p>               Bases: <code>ABC</code></p> <p>A plugin to provide data and operations on a repository level.</p> Source code in <code>slap/plugins.py</code> <pre><code>class RepositoryHandlerPlugin(abc.ABC):\n    \"\"\"A plugin to provide data and operations on a repository level.\"\"\"\n\n    ENTRYPOINT = \"slap.plugins.repository\"\n\n    @abc.abstractmethod\n    def matches_repository(self, repository: Repository) -&gt; bool:\n        \"\"\"Return `True` if the handler is able to provide data for the given project.\"\"\"\n\n    @abc.abstractmethod\n    def get_vcs(self, repository: Repository) -&gt; Vcs | None:\n        \"\"\"Return the version control system that the repository is managed with.\"\"\"\n\n    @abc.abstractmethod\n    def get_repository_host(self, repository: Repository) -&gt; RepositoryHost | None:\n        \"\"\"Return the interface for interacting with the VCS hosting service.\"\"\"\n\n    @abc.abstractmethod\n    def get_projects(self, repository: Repository) -&gt; list[Project]:\n        \"\"\"Return the projects of this repository.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryHandlerPlugin.get_projects","title":"get_projects  <code>abstractmethod</code>","text":"<pre><code>get_projects(repository: Repository) -&gt; list[Project]\n</code></pre> <p>Return the projects of this repository.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_projects(self, repository: Repository) -&gt; list[Project]:\n    \"\"\"Return the projects of this repository.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryHandlerPlugin.get_repository_host","title":"get_repository_host  <code>abstractmethod</code>","text":"<pre><code>get_repository_host(repository: Repository) -&gt; RepositoryHost | None\n</code></pre> <p>Return the interface for interacting with the VCS hosting service.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_repository_host(self, repository: Repository) -&gt; RepositoryHost | None:\n    \"\"\"Return the interface for interacting with the VCS hosting service.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryHandlerPlugin.get_vcs","title":"get_vcs  <code>abstractmethod</code>","text":"<pre><code>get_vcs(repository: Repository) -&gt; Vcs | None\n</code></pre> <p>Return the version control system that the repository is managed with.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef get_vcs(self, repository: Repository) -&gt; Vcs | None:\n    \"\"\"Return the version control system that the repository is managed with.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.RepositoryHandlerPlugin.matches_repository","title":"matches_repository  <code>abstractmethod</code>","text":"<pre><code>matches_repository(repository: Repository) -&gt; bool\n</code></pre> <p>Return <code>True</code> if the handler is able to provide data for the given project.</p> Source code in <code>slap/plugins.py</code> <pre><code>@abc.abstractmethod\ndef matches_repository(self, repository: Repository) -&gt; bool:\n    \"\"\"Return `True` if the handler is able to provide data for the given project.\"\"\"\n</code></pre>"},{"location":"api/documentation/#slap.plugins.VersionIncrementingRulePlugin","title":"VersionIncrementingRulePlugin","text":"<p>               Bases: <code>ABC</code></p> <p>This plugin type can be implemented to provide rules accepted by the <code>slap release &lt;rule&gt;</code> command to \"bump\" an existing version number to another. The builtin rules implemented in #slap.ext.version_incrementing_rules.</p> Source code in <code>slap/plugins.py</code> <pre><code>class VersionIncrementingRulePlugin(abc.ABC):\n    \"\"\"This plugin type can be implemented to provide rules accepted by the `slap release &lt;rule&gt;` command to \"bump\" an\n    existing version number to another. The builtin rules implemented in #slap.ext.version_incrementing_rules.\n    \"\"\"\n\n    ENTRYPOINT = \"slap.plugins.version_incrementing_rule\"\n\n    @abc.abstractmethod\n    def increment_version(self, version: Version) -&gt; Version: ...\n</code></pre>"},{"location":"api/plugins/","title":"Plugins","text":"<p>A lot of Slap's internal functionality is provided through a plugin interface, allowing other tools to extend the functionality of Slap further.</p>"},{"location":"api/plugins/#types-of-plugins","title":"Types of plugins","text":"<ul> <li>slap.plugins.ApplicationPlugin \u2013 This is the main type of plugin. Most other types of plugins are registered through an   application plugin using the <code>Application.plugins</code> registry.</li> <li>slap.plugins.CheckPlugin \u2013 The type of plugin used by <code>slap check</code>.</li> <li>slap.plugins.ReleasePlugin \u2013 The type of plugin used by <code>slap release</code> to detect version references.</li> </ul>"},{"location":"commands/add/","title":"<code>slap add</code>","text":"<p>This command is venv aware.</p> <p>This command adds one or more Python packages to the dependencies defined in <code>pyproject.toml</code>. If the packages are not already installed, they will be installed into the current Python environment using Pip.</p> Synopsis <pre><code>@shell slap add --help\n</code></pre>"},{"location":"commands/add/#usage-example","title":"Usage example","text":"<p>The below example installs <code>httpx</code> using Pip and adds the dependency to <code>pyproject.toml</code>. If your project is using Poetry as the build backend, it will add <code>httpx = \"^0.22.0\"</code> wheras if it is using Flit, the command will add instead <code>'httpx (&gt;=0.22.0,&lt;0.23.0)'</code>.</p> <pre><code>$ slap add httpx\nInstalling httpx\nAdding httpx ^0.22.0\n</code></pre> <p>Note</p> <p>Slap uses <code>importlib.metadata.distribution()</code> to retrieve the version of the package that got installed, or was already installed, and assumes that the module is available in the target Python environment. The module is part of the Python standard library starting with Python 3.8.</p>"},{"location":"commands/add/#support-matrix","title":"Support matrix","text":"Build system Supported Flit \u2705 Poetry \u2705 Setuptools \u274c (dependencies defined in <code>setup.cfg</code>)"},{"location":"commands/changelog/","title":"<code>slap changelog</code>","text":"<p>This command provides four sub-commands that allow you to interact with Slap's structured changelog format: <code>add</code>, <code>convert</code>, <code>format</code> and <code>update-pr</code>.</p>"},{"location":"commands/changelog/#configuration","title":"Configuration","text":"<p>Option scope: <code>[tool.slap.changelog]</code> or <code>[changelog]</code></p> Option Type Default Description <code>enabled</code> <code>bool</code> <code>True</code> Whether the changelog feature is enabled for the directory in which the option is configured. This is useful to disable on the root of a mono-repository that contains multiple Python projects if one wants to prevent accidentally add changelog entries to the root directory. <code>directory</code> <code>str</code> <code>.changelog/</code> The directory in which the changelogs are stored. <code>valid-types</code> <code>list[str]</code> <code>[\"breaking change\", \"docs\", \"feature\", \"fix\", \"hygiene\", \"improvement\", \"tests\"]</code> A list of strings that are accepted in changelog entries as types. <code>ChangelogConfig</code> documentation  ::: slap.ext.application.changelog.ChangelogConfig"},{"location":"commands/changelog/#subcommands","title":"Subcommands","text":""},{"location":"commands/changelog/#slap-changelog-add","title":"<code>slap changelog add</code>","text":"<p>Add an entry to the unreleased changelog. Given the <code>-c,--commit</code> option, it will also create a Git commit with the same message as the entry description, prefixed by the changelog type. If used in a sub-directory of a project, the commit message is prefixed by the sub-directory.</p> <p>Example</p> <pre><code>$ slap changelog add -t fix -d 'Fix the documentation' --issue 231 --issue 234\n# Added changelog entry to .changelog/_unreleased.toml\nid = \"e0ee08af-ff2e-4aee-b795-e6c37e4c16de\"\ntype = \"fix\"\ndescription = \"Fix the documentation\"\nauthor = \"@NiklasRosenstein\"\nissues = [\n  \"https://github.com/username/repo/issues/231\",\n  \"https://github.com/username/repo/issues/234\",\n]\n</code></pre> Default changelog types <pre><code>DEFAULT_VALID_TYPES = [\n  'breaking change',\n  'deprecation',\n  'docs',\n  'feature',\n  'fix',\n  'hygiene',\n  'improvement',\n  'refactor',\n  'tests'\n]\n</code></pre> Synopsis <pre><code>@shell slap changelog add --help\n</code></pre>"},{"location":"commands/changelog/#slap-changelog-convert","title":"<code>slap changelog convert</code>","text":"<p>This command converts changelogs from the previous YAML-based format used by Shut (a predecessor to Slap) to the TOML format.</p> Synopsis <pre><code>@shell slap changelog convert --help\n</code></pre>"},{"location":"commands/changelog/#slap-changelog-format","title":"<code>slap changelog format</code>","text":"<p>Pretty print a changelog for the terminal or formatted as Markdown. Use the <code>-a,--all</code> option to format all changelogs. This command is particularly useful to embed the changelog contents into generated documentation. For example, if you use Novella, you can use the below bit in your documentation:</p> <pre><code>@shell cd .. &amp;&amp; slap changelog format --as-markdown --all\n</code></pre> <p>This is actually used in this very documentation: Check out the Changelog page.</p> Synopsis <pre><code>@shell slap changelog format --help\n</code></pre>"},{"location":"commands/changelog/#slap-changelog-diff-pr-update","title":"<code>slap changelog diff pr update</code>","text":"<p>Updates the <code>pr</code> field of entries in the unreleased changelog. This is useful to run from continuous integration jobs to avoid having to manually inject the pull request URL into changelog entries. If you are using GitHub, try using the <code>NiklasRosenstein/slap@gha/changelog/update/v2</code> action.</p> Synopsis <pre><code>@shell slap changelog diff pr update --help\n</code></pre>"},{"location":"commands/changelog/#slap-changelog-diff-assert-added","title":"<code>slap changelog diff assert-added</code>","text":"<p>This is a useful command to run in CI on Pull Requests to ensure that a new changelog entry was added by the PR. If you are using GitHub, try using the <code>NiklasRosenstein/slap@gha/changelog/assert-added/v2</code> action.</p> Synopsis <pre><code>@shell slap changelog diff assert-added --help\n</code></pre>"},{"location":"commands/check/","title":"<code>slap check</code>","text":"<p>Check your project configuration for errors, warnings or recommendations.</p>"},{"location":"commands/check/#configuration","title":"Configuration","text":"<p>Option scope: <code>[tool.slap.check]</code> or <code>[check]</code></p> Option Type Default Description <code>plugins</code> <code>list[str]</code> <code>[\"changelog\", \"general\", \"poetry\", \"release\"]</code> A list of check plugins to use. Note that the Poetry plugin only fire checks if your project appears to be using Poetry, so there is no harm in leaving it enabled even if you don't it. Additional plugins can be registered via an <code>ApplicationPlugin</code> under the <code>CheckPlugin</code> group."},{"location":"commands/check/#built-in-check-plugins","title":"Built-in check plugins","text":""},{"location":"commands/check/#slap.ext.checks.changelog.ChangelogValidationCheckPlugin","title":"slap.ext.checks.changelog.ChangelogValidationCheckPlugin  <code>dataclass</code>","text":"<p>               Bases: <code>CheckPlugin</code></p> <p>This check plugin validates the structured changelog files, if any.</p> <p>Plugin ID: <code>changelog</code></p> Source code in <code>slap/ext/checks/changelog.py</code> <pre><code>@dataclasses.dataclass\nclass ChangelogValidationCheckPlugin(CheckPlugin):\n    \"\"\"This check plugin validates the structured changelog files, if any.\n\n    Plugin ID: `changelog`\"\"\"\n\n    def get_project_checks(self, project: Project) -&gt; t.Iterable[Check]:\n        return get_checks(self, project)\n\n    @check(\"validate\")\n    def _validate_changelogs(self, project: Project) -&gt; tuple[CheckResult, str | None, str | None]:\n        import tomli\n        from databind.core.converter import ConversionError\n\n        manager = get_changelog_manager(project.repository, project)\n        bad_files = []\n        bad_changelogs = []\n        count = 0\n        for changelog in manager.all():\n            count += 1\n            try:\n                for entry in changelog.load().entries:\n                    try:\n                        manager.validate_entry(entry)\n                    except (ConversionError, ValueError) as exc:\n                        bad_changelogs.append((changelog.path.name, str(exc), entry.id))\n            except (tomli.TOMLDecodeError, ConversionError) as exc:\n                bad_files.append((changelog.path.name, str(exc)))\n\n        if not count:\n            return CheckResult.SKIPPED, None, None\n\n        return (\n            Check.ERROR if bad_changelogs else Check.Result.OK,\n            \"Broken or invalid changelogs\" if bad_changelogs else f\"All {count} changelogs are valid.\",\n            (\n                \"\\n\".join(f\"&lt;i&gt;{fn}&lt;/i&gt;: {err}\" for fn, err in bad_files)\n                if bad_files\n                else (\n                    \"\"\n                    + \"\\n\"\n                    + \"\\n\".join(\n                        f'&lt;i&gt;{fn}&lt;/i&gt;: id=&lt;fg=yellow&gt;\"{entry_id}\"&lt;/fg&gt;: {err}' for fn, err, entry_id in bad_changelogs\n                    )\n                    if bad_changelogs\n                    else \"\"\n                )\n            ).strip()\n            or None,\n        )\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.general.GeneralChecksPlugin","title":"slap.ext.checks.general.GeneralChecksPlugin","text":"<p>               Bases: <code>CheckPlugin</code></p> <p>This plugin provides general checks applicable to all types of projects managed with Slap.</p> <p>Plugin ID: <code>general</code>.</p> Source code in <code>slap/ext/checks/general.py</code> <pre><code>class GeneralChecksPlugin(CheckPlugin):\n    \"\"\"This plugin provides general checks applicable to all types of projects managed with Slap.\n\n    Plugin ID: `general`.\"\"\"\n\n    # TODO (@NiklasRosenstein): Check if VCS remote is configured?\n\n    def get_project_checks(self, project: Project) -&gt; t.Iterable[Check]:\n        return get_checks(self, project)\n\n    @check(\"packages\")\n    def _check_detect_packages(self, project: Project) -&gt; tuple[CheckResult, str | None]:\n        \"\"\"Checks if the project handler employed by Slap for your project is detecting any Python packages. If no\n        Python packages can be detected, it might hint at a configuration issue.\"\"\"\n\n        packages = project.packages()\n        result = Check.Result.SKIPPED if packages is None else Check.Result.OK if packages else Check.Result.ERROR\n        message = \"Detected \" + \", \".join(f\"&lt;b&gt;{p.root}/{p.name}&lt;/b&gt;\" for p in packages) if packages else None\n        return result, message\n\n    @check(\"typed\")\n    def _check_py_typed(self, project: Project) -&gt; tuple[CheckResult, str]:\n        expect_typed = project.config().typed\n        if expect_typed is None:\n            return Check.Result.WARNING, \"&lt;b&gt;tool.slap.typed&lt;/b&gt; is not set\"\n\n        has_py_typed = set[str]()\n        has_no_py_typed = set[str]()\n        for package in project.packages() or []:\n            (has_py_typed if (package.path / \"py.typed\").is_file() else has_no_py_typed).add(package.name)\n\n        if expect_typed and has_no_py_typed:\n            error = True\n            message = f'&lt;b&gt;py.typed&lt;/b&gt; missing in package(s) &lt;b&gt;{\", \".join(has_no_py_typed)}&lt;/b&gt;'\n        elif not expect_typed and has_py_typed:\n            error = True\n            message = f'&lt;b&gt;py.typed&lt;/b&gt; in package(s) should not exist &lt;b&gt;{\", \".join(has_py_typed)}&lt;/b&gt;'\n        else:\n            error = False\n            message = (\n                \"&lt;b&gt;py.typed&lt;/b&gt; exists as expected\" if expect_typed else \"&lt;b&gt;py.typed&lt;/b&gt; does not exist as expected\"\n            )\n\n        return (Check.Result.ERROR if error else Check.Result.OK, message)\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.poetry.PoetryChecksPlugin","title":"slap.ext.checks.poetry.PoetryChecksPlugin","text":"<p>               Bases: <code>CheckPlugin</code></p> <p>Check plugin to validate the Poetry configuration and compare it with Slap's expectations.</p> <p>Plugin ID: <code>poetry</code></p> Source code in <code>slap/ext/checks/poetry.py</code> <pre><code>class PoetryChecksPlugin(CheckPlugin):\n    \"\"\"Check plugin to validate the Poetry configuration and compare it with Slap's expectations.\n\n    Plugin ID: `poetry`\"\"\"\n\n    def get_project_checks(self, project: Project) -&gt; t.Iterable[Check]:\n        self.project = project\n        pyproject: dict[str, t.Any] = project.pyproject_toml.value_or({})\n        if isinstance(project.handler(), PoetryProjectHandler):\n            self.poetry = pyproject.get(\"tool\", {}).get(\"poetry\")\n            if self.poetry is None:\n                yield Check(\n                    \"config\", CheckResult.ERROR, \"No [tool.poetry] configuration in &lt;code&gt;pyproject.toml&lt;/code&gt;\"\n                )\n                return\n            yield from get_checks(self, project)\n\n    @check(\"readme\")\n    def get_readme_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if Poetry will be able to pick up the right readme file.\"\"\"\n\n        default_readmes = [\"README.md\", \"README.rst\"]\n        detected_readme = (\n            Optional(get_readme_path(self.project))\n            .map(lambda p: str(p.resolve().relative_to(Path.cwd())))\n            .or_else(None)\n        )\n        poetry_readme = self.poetry.get(\"readme\")\n        if poetry_readme is None and detected_readme in default_readmes:\n            return Check.Result.OK, f\"Poetry will autodetect your readme (&lt;b&gt;{detected_readme}&lt;/b&gt;)\"\n        if poetry_readme == detected_readme:\n            return Check.Result.OK, f\"Poetry readme is configured correctly (path: &lt;b&gt;{detected_readme}&lt;/b&gt;)\"\n        return (\n            Check.Result.WARNING,\n            f\"Poetry readme appears to be misconfigured (detected: &lt;b&gt;{detected_readme}&lt;/b&gt;, \"\n            f\"configured: &lt;b&gt;{poetry_readme}&lt;/b&gt;)\",\n        )\n\n    @check(\"urls\")\n    def get_urls_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if URLs are configured in the Poetry configuration and recommends to configure the `Homepage`,\n        `Repository`, `Documentation` and `Bug Tracker` URLs under `[tool.poetry.urls]`.\"\"\"\n\n        has_homepage = \"homepage\" in self.poetry or \"homepage\" in {\n            x.lower() for x in self.poetry.get(\"urls\", {}).keys()\n        }\n        has_repository = \"repository\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n        has_documentation = \"documentation\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n        has_bug_tracker = \"bug tracker\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n\n        if has_homepage and has_repository and has_documentation and has_bug_tracker:\n            return Check.OK, \"Your project URLs are in top condition.\"\n        else:\n            missing = [\n                k\n                for k, v in {\n                    \"Homepage\": has_homepage,\n                    \"Repository\": has_repository,\n                    \"Documentation\": has_documentation,\n                    \"Bug Tracker\": has_bug_tracker,\n                }.items()\n                if not v\n            ]\n            result = Check.RECOMMENDATION if has_homepage else Check.WARNING\n            message = \"Please configure the following URLs: \" + \", \".join(f'&lt;s&gt;\"{k}\"&lt;/s&gt;' for k in missing)\n            return result, message\n\n    @check(\"classifiers\")\n    def get_classifiers_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if all Python package classifiers are valid and recommends to configure them if none are set.\"\"\"\n\n        # TODO: Check for recommended classifier topics (Development State, Environment,\n        #       Programming Language, Topic, Typing, etc.)\n        classifiers = self.poetry.get(\"classifiers\")  # TODO: Support classifiers in [project]\n        if not classifiers:\n            return Check.RECOMMENDATION, \"Please configure classifiers.\"\n        else:\n            try:\n                good_classifiers = get_classifiers()\n            except requests.RequestException as exc:\n                return Check.WARNING, f\"Could not validate classifiers because list could not be fetched ({exc})\"\n            else:\n                bad_classifiers = set(classifiers) - set(good_classifiers)\n                if bad_classifiers:\n                    return Check.ERROR, \"Found bad classifiers: \" + \",\".join(f'&lt;s&gt;\"{c}\"&lt;/s&gt;' for c in bad_classifiers)\n                else:\n                    return Check.OK, \"All classifiers are valid.\"\n\n    @check(\"license\")\n    def get_license_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if package license is a valid SPDX license identifier and recommends to configure a license if\n        none is set.\"\"\"\n\n        from slap.util.external.licenses import get_spdx_licenses\n\n        license = self.poetry.get(\"license\")\n        if not license:\n            return Check.ERROR, \"Missing license\"\n        else:\n            if license not in get_spdx_licenses():\n                return Check.WARNING, f'License &lt;s&gt;\"{license}\"&lt;/s&gt; is not a known SPDX license identifier.'\n            else:\n                return Check.OK, f'License &lt;s&gt;\"{license}\"&lt;/s&gt; is a valid SPDX identifier.'\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.poetry.PoetryChecksPlugin.get_classifiers_check","title":"get_classifiers_check","text":"<pre><code>get_classifiers_check(project: Project) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if all Python package classifiers are valid and recommends to configure them if none are set.</p> Source code in <code>slap/ext/checks/poetry.py</code> <pre><code>@check(\"classifiers\")\ndef get_classifiers_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if all Python package classifiers are valid and recommends to configure them if none are set.\"\"\"\n\n    # TODO: Check for recommended classifier topics (Development State, Environment,\n    #       Programming Language, Topic, Typing, etc.)\n    classifiers = self.poetry.get(\"classifiers\")  # TODO: Support classifiers in [project]\n    if not classifiers:\n        return Check.RECOMMENDATION, \"Please configure classifiers.\"\n    else:\n        try:\n            good_classifiers = get_classifiers()\n        except requests.RequestException as exc:\n            return Check.WARNING, f\"Could not validate classifiers because list could not be fetched ({exc})\"\n        else:\n            bad_classifiers = set(classifiers) - set(good_classifiers)\n            if bad_classifiers:\n                return Check.ERROR, \"Found bad classifiers: \" + \",\".join(f'&lt;s&gt;\"{c}\"&lt;/s&gt;' for c in bad_classifiers)\n            else:\n                return Check.OK, \"All classifiers are valid.\"\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.poetry.PoetryChecksPlugin.get_license_check","title":"get_license_check","text":"<pre><code>get_license_check(project: Project) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if package license is a valid SPDX license identifier and recommends to configure a license if none is set.</p> Source code in <code>slap/ext/checks/poetry.py</code> <pre><code>@check(\"license\")\ndef get_license_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if package license is a valid SPDX license identifier and recommends to configure a license if\n    none is set.\"\"\"\n\n    from slap.util.external.licenses import get_spdx_licenses\n\n    license = self.poetry.get(\"license\")\n    if not license:\n        return Check.ERROR, \"Missing license\"\n    else:\n        if license not in get_spdx_licenses():\n            return Check.WARNING, f'License &lt;s&gt;\"{license}\"&lt;/s&gt; is not a known SPDX license identifier.'\n        else:\n            return Check.OK, f'License &lt;s&gt;\"{license}\"&lt;/s&gt; is a valid SPDX identifier.'\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.poetry.PoetryChecksPlugin.get_readme_check","title":"get_readme_check","text":"<pre><code>get_readme_check(project: Project) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if Poetry will be able to pick up the right readme file.</p> Source code in <code>slap/ext/checks/poetry.py</code> <pre><code>@check(\"readme\")\ndef get_readme_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if Poetry will be able to pick up the right readme file.\"\"\"\n\n    default_readmes = [\"README.md\", \"README.rst\"]\n    detected_readme = (\n        Optional(get_readme_path(self.project))\n        .map(lambda p: str(p.resolve().relative_to(Path.cwd())))\n        .or_else(None)\n    )\n    poetry_readme = self.poetry.get(\"readme\")\n    if poetry_readme is None and detected_readme in default_readmes:\n        return Check.Result.OK, f\"Poetry will autodetect your readme (&lt;b&gt;{detected_readme}&lt;/b&gt;)\"\n    if poetry_readme == detected_readme:\n        return Check.Result.OK, f\"Poetry readme is configured correctly (path: &lt;b&gt;{detected_readme}&lt;/b&gt;)\"\n    return (\n        Check.Result.WARNING,\n        f\"Poetry readme appears to be misconfigured (detected: &lt;b&gt;{detected_readme}&lt;/b&gt;, \"\n        f\"configured: &lt;b&gt;{poetry_readme}&lt;/b&gt;)\",\n    )\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.poetry.PoetryChecksPlugin.get_urls_check","title":"get_urls_check","text":"<pre><code>get_urls_check(project: Project) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if URLs are configured in the Poetry configuration and recommends to configure the <code>Homepage</code>, <code>Repository</code>, <code>Documentation</code> and <code>Bug Tracker</code> URLs under <code>[tool.poetry.urls]</code>.</p> Source code in <code>slap/ext/checks/poetry.py</code> <pre><code>@check(\"urls\")\ndef get_urls_check(self, project: Project) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if URLs are configured in the Poetry configuration and recommends to configure the `Homepage`,\n    `Repository`, `Documentation` and `Bug Tracker` URLs under `[tool.poetry.urls]`.\"\"\"\n\n    has_homepage = \"homepage\" in self.poetry or \"homepage\" in {\n        x.lower() for x in self.poetry.get(\"urls\", {}).keys()\n    }\n    has_repository = \"repository\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n    has_documentation = \"documentation\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n    has_bug_tracker = \"bug tracker\" in {x.lower() for x in self.poetry.get(\"urls\", {}).keys()}\n\n    if has_homepage and has_repository and has_documentation and has_bug_tracker:\n        return Check.OK, \"Your project URLs are in top condition.\"\n    else:\n        missing = [\n            k\n            for k, v in {\n                \"Homepage\": has_homepage,\n                \"Repository\": has_repository,\n                \"Documentation\": has_documentation,\n                \"Bug Tracker\": has_bug_tracker,\n            }.items()\n            if not v\n        ]\n        result = Check.RECOMMENDATION if has_homepage else Check.WARNING\n        message = \"Please configure the following URLs: \" + \", \".join(f'&lt;s&gt;\"{k}\"&lt;/s&gt;' for k in missing)\n        return result, message\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.release.ReleaseChecksPlugin","title":"slap.ext.checks.release.ReleaseChecksPlugin","text":"<p>               Bases: <code>CheckPlugin</code></p> <p>Performs some checks relevant for the <code>slap release</code> command.</p> Source code in <code>slap/ext/checks/release.py</code> <pre><code>class ReleaseChecksPlugin(CheckPlugin):\n    \"\"\"Performs some checks relevant for the `slap release` command.\"\"\"\n\n    def get_project_checks(self, project: Project) -&gt; t.Iterable[Check]:\n        return get_checks(self, project)\n\n    def get_application_checks(self, app: Application) -&gt; t.Iterable[Check]:\n        return get_checks(self, app)\n\n    @check(\"source-code-version\")\n    def check_packages_have_source_code_version(self, project: Project) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if all Python packages in the project have a version defined in the source code.\"\"\"\n\n        if not project.packages():\n            return Check.WARNING, \"No packages detected\"\n\n        matcher = SourceCodeVersionReferencesPlugin()\n        matcher.io = NullIO()\n        version_refs = matcher.get_version_refs(project)\n        packages_without_version = {p.name for p in project.packages() or []}\n\n        for ref in version_refs:\n            for package in project.packages() or []:\n                if ref.file.is_relative_to(package.path):\n                    packages_without_version.discard(package.name)\n\n        return (\n            Check.ERROR if packages_without_version else Check.OK,\n            (\n                (f'The following packages have no &lt;b&gt;__version__&lt;/b&gt;: &lt;b&gt;{\", \".join(packages_without_version)}&lt;/b&gt;')\n                if packages_without_version\n                else f'Found &lt;b&gt;__version__&lt;/b&gt; in &lt;b&gt;{\", \".join(x.name for x in project.packages() or [])}&lt;/b&gt;'\n            ),\n        )\n\n    @check(\"consistent-versions\")\n    def check_version_number_consistency(self, app: Application) -&gt; tuple[CheckResult, str]:\n        \"\"\"Checks if the version numbers in the project source code, project configuration and any other instances\n        that are detected by release plugins or in the `[tool.slap.release].references` option are consistent.\"\"\"\n\n        releaser = ReleaseCommandPlugin(app)\n        releaser.load_configuration(app)\n\n        version_refs = releaser._get_version_refs()\n        cardinality = len(set(r.value for r in version_refs))\n\n        if cardinality == 0:\n            result = Check.WARNING\n            message = \"No version references found\"\n        elif cardinality == 1:\n            result = Check.OK\n            message = \"All version references are equal\"\n        else:\n            result = Check.ERROR\n            message = f\"Found &lt;b&gt;{cardinality}&lt;/b&gt; differing version references\"\n\n        return result, message\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.release.ReleaseChecksPlugin.check_packages_have_source_code_version","title":"check_packages_have_source_code_version","text":"<pre><code>check_packages_have_source_code_version(project: Project) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if all Python packages in the project have a version defined in the source code.</p> Source code in <code>slap/ext/checks/release.py</code> <pre><code>@check(\"source-code-version\")\ndef check_packages_have_source_code_version(self, project: Project) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if all Python packages in the project have a version defined in the source code.\"\"\"\n\n    if not project.packages():\n        return Check.WARNING, \"No packages detected\"\n\n    matcher = SourceCodeVersionReferencesPlugin()\n    matcher.io = NullIO()\n    version_refs = matcher.get_version_refs(project)\n    packages_without_version = {p.name for p in project.packages() or []}\n\n    for ref in version_refs:\n        for package in project.packages() or []:\n            if ref.file.is_relative_to(package.path):\n                packages_without_version.discard(package.name)\n\n    return (\n        Check.ERROR if packages_without_version else Check.OK,\n        (\n            (f'The following packages have no &lt;b&gt;__version__&lt;/b&gt;: &lt;b&gt;{\", \".join(packages_without_version)}&lt;/b&gt;')\n            if packages_without_version\n            else f'Found &lt;b&gt;__version__&lt;/b&gt; in &lt;b&gt;{\", \".join(x.name for x in project.packages() or [])}&lt;/b&gt;'\n        ),\n    )\n</code></pre>"},{"location":"commands/check/#slap.ext.checks.release.ReleaseChecksPlugin.check_version_number_consistency","title":"check_version_number_consistency","text":"<pre><code>check_version_number_consistency(app: Application) -&gt; tuple[CheckResult, str]\n</code></pre> <p>Checks if the version numbers in the project source code, project configuration and any other instances that are detected by release plugins or in the <code>[tool.slap.release].references</code> option are consistent.</p> Source code in <code>slap/ext/checks/release.py</code> <pre><code>@check(\"consistent-versions\")\ndef check_version_number_consistency(self, app: Application) -&gt; tuple[CheckResult, str]:\n    \"\"\"Checks if the version numbers in the project source code, project configuration and any other instances\n    that are detected by release plugins or in the `[tool.slap.release].references` option are consistent.\"\"\"\n\n    releaser = ReleaseCommandPlugin(app)\n    releaser.load_configuration(app)\n\n    version_refs = releaser._get_version_refs()\n    cardinality = len(set(r.value for r in version_refs))\n\n    if cardinality == 0:\n        result = Check.WARNING\n        message = \"No version references found\"\n    elif cardinality == 1:\n        result = Check.OK\n        message = \"All version references are equal\"\n    else:\n        result = Check.ERROR\n        message = f\"Found &lt;b&gt;{cardinality}&lt;/b&gt; differing version references\"\n\n    return result, message\n</code></pre>"},{"location":"commands/info/","title":"<code>slap info</code>","text":"<p>Shows details about your repository and project(s) as Slap understands them.</p> Synopsis <pre><code>@shell slap info --help\n</code></pre> <p>Example from the Slap repository itself:</p> $ slap info<pre><code>@shell cd .. &amp;&amp; slap info\n</code></pre>"},{"location":"commands/init/","title":"<code>slap init</code>","text":"<p>This command bootstrap Python project files.</p> Synopsis <pre><code>@shell slap init --help\n</code></pre>"},{"location":"commands/init/#templates","title":"Templates","text":""},{"location":"commands/init/#poetry","title":"Poetry","text":"$ slap init -t poetry --name my.pkg<pre><code>@shell slap init -t poetry --name my.pkg -f --dry\n</code></pre> <p>@shell slap init -t poetry --name my.pkg --as-markdown -q</p>"},{"location":"commands/init/#github","title":"Github","text":"$ slap init -t github<pre><code>@shell slap init -t github -f --dry\n</code></pre> <p>@shell slap init -t github --as-markdown -q</p>"},{"location":"commands/install/","title":"<code>slap install</code>","text":"<p>This command is venv aware.</p> <p>Install the current project or all projects in a mono-repository into the current Python environment, including development dependencies and extras. After cloning a new repository, this is often the first command you run after creating a virtual environment (for that, see <code>slap venv</code>).</p> <p>Common options to add are <code>--link</code> if you want to develop on the project(s) and <code>--no-venv-check</code> if you want don't want Slap to protect you from accidentally installing the project(s) into a non-virtual Python environment.</p> Synopsis <pre><code>@shell slap install --help\n</code></pre>"},{"location":"commands/link/","title":"<code>slap link</code>","text":"<p>This command is venv aware.</p> <p>Symlink your project or all projects in a mono-repository into the current Python environment. This works for Poetry projects as well.</p> <p>Warning</p> <p>Independent from the Python build system you are using, Slap reuses Flit's symlinking feature to perform this action. This actually symbolically links your source code into the Python site-packages. Be aware that this can cause your code to be overwritten for example by Pip if you end up overwriting the symlinked installation of your package by installing another version of it into the same environment.</p> Synopsis <pre><code>@shell slap link --help\n</code></pre>"},{"location":"commands/publish/","title":"<code>slap publish</code>","text":"<p>This command builds an <code>sdist</code> and <code>wheel</code> distribution for your project or every project in your mono-repository and publishes it using Twine (the command has pretty much all the same options). Often you will use this command immediately after running <code>slap release</code> or from a CI job when new tag/release was created.</p> <p>If you just want to build your package(s) and not actually publish them, add the <code>-d,--dry</code> option. To be able to inspect the resulting distribution files and not loose them to the temporary directory, pass an explicit build directory using <code>-b,--build-directory</code>.</p> Synopsis <pre><code>@shell slap publish --help\n</code></pre>"},{"location":"commands/release/","title":"<code>slap release</code>","text":"<p>This command updates the version numbers in your project(s).</p> Synopsis <pre><code>@shell slap release --help\n</code></pre>"},{"location":"commands/release/#tool-comparison","title":"Tool comparison","text":"Feature <code>poetry bump</code> <code>slap release</code> Check for consistent version numbers across files in your repository \u274c \u2705 Update version number in <code>pyproject.toml</code> \u2705 \u2705 Update dependencies of another project within the same mono-repository (interdependencies) \u2705 Update <code>__version__</code> in source code \u274c \u2705 Update and rename Slap structure changelog files \u2705 Commit changes, create a tag and push to Git remote \u274c \u2705 Create GitHub releases \u274c \u274c (planned in #29) <p>Legend: \u2705 supported, \u274c not supported, (blank) conceptually irrelevant</p>"},{"location":"commands/release/#configuration","title":"Configuration","text":"<p>Option scope: <code>[tool.slap.release]</code> or <code>[release]</code></p> Option Type Default Description <code>branch</code> <code>str</code> <code>\"develop\"</code> The branch on which releases are created. Unless <code>--no-branch-check</code> is passed to <code>slap release</code>, the command will refuse to continue if the current branch name does not match this value. <code>commit-message</code> <code>str</code> <code>release {version}</code> The commit message to use when using the <code>--tag, -t</code> option. The string <code>{version}</code> will be replaced with the new version number. <code>tag-name</code> <code>str</code> <code>{version}</code> The tag name to use when using the <code>--tag, -t</code> option. The string <code>{version}</code> will be replaced with the new version number. <code>references</code> <code>list[VersionRefConfig]</code> <code>[]</code> A list of version references that should be considered in addition to the version references that are automatically detected by Slap when updating version numbers across the project with the <code>slap release</code> command. A <code>VersionRefConfig</code> contains the fields <code>file: str</code> and <code>pattern: str</code>. The <code>file</code> is considered relative to the project directory (which is the directory where the <code>slap.toml</code> or <code>pyproject.toml</code> configuration file resides). <code>ReleaseConfig</code>  ::: slap.ext.application.release.ReleaseConfig   <code>VersionRefConfig</code>  ::: slap.ext.application.release.VersionRefConfig"},{"location":"commands/release/#usage-example","title":"Usage example","text":"<pre><code>$ slap release patch --tag --push\nbumping 2 version references:\n  pyproject.toml: 0.1.0 \u2192 0.1.1\n  src/my_package/__init__.py: 0.1.0 \u2192 0.1.1\n\nrelease staged changelog\n  .changelog/_unreleased.toml \u2192 .changelog/0.1.1.toml\n\ntagging 0.1.1\n\npushing develop, 0.1.1 to origin\n</code></pre>"},{"location":"commands/report/","title":"report","text":"<p>The <code>slap report</code> commands generate reports about your project.</p>"},{"location":"commands/report/#subcommands","title":"Subcommands","text":""},{"location":"commands/report/#slap-report-dependencies","title":"<code>slap report dependencies</code>","text":"<p>This command is venv aware.</p> <p>Generates a JSON report on the dependencies of your project based on the packages installed in your environment. Usually, the most interesting piece is the license information of every dependency, which is contained in the JSON report. The license name (and text if <code>--with-license-text</code> is specified) is read from the package distribution metadata.</p> <p>The command will only resolve only runtime dependencies by default. You can specify additional extras to include in the resolution using the <code>--extras</code> option.</p> Synopsis <code>report dependencies</code> <pre><code>@shell slap report dependencies --help\n</code></pre> Dependencies report for Slap <pre><code>@shell cd .. &amp;&amp; slap report dependencies\n</code></pre>"},{"location":"commands/run/","title":"<code>slap run</code>","text":"<p>This command is venv aware.</p> <p>Runs a command, using the commands configured under the <code>[tool.slap.run]</code> section as a source for aliases.</p> <p>If there is an active virtual environment and you are not already in a virtual environment, it will be activated before the command is run.</p> Synopsis <pre><code>@shell slap run --help\n</code></pre>"},{"location":"commands/run/#configuration","title":"Configuration","text":"<p>Option scope: <code>[tool.slap.run]</code> or <code>[run]</code></p> Option Type Default Description <code>&lt;name&gt;</code> <code>str</code> n/a A command as a string to run with the system shell. <p>Example configuration</p> <p>=== \"pyproject.toml\"</p> <pre><code>```toml\n[tool.slap.run]\n\"docs:build\" = \"cd docs &amp;&amp; novella --base-url slap/\"\n\"docs:dev\" = \"cd docs &amp;&amp; novella --serve\"\n```\n</code></pre> <p>=== \"slap.toml\"</p> <pre><code>```toml\n[run]\n\"docs:build\" = \"cd docs &amp;&amp; novella --base-url slap/\"\n\"docs:dev\" = \"cd docs &amp;&amp; novella --serve\"\n```\n</code></pre> <pre><code>$ slap run docs:dev\n...\n</code></pre>"},{"location":"commands/test/","title":"<code>slap test</code>","text":"<p>This command is venv aware.</p> <p>Runs some or all of the tests from the Slap configuration. This is different from <code>slap run</code> in that by default it runs multiple commands, prefixes the output them with the test name (similar to <code>docker-compose logs</code>), works across multiple projects in a mono-repository and prints a summary of the results at the end.</p> <p>If there is an active virtual environment and you are not already in a virtual environment, it will be activated before the test commands are run.</p> Synopsis <pre><code>@shell slap test --help\n</code></pre>"},{"location":"commands/test/#configuration","title":"Configuration","text":"<p>Option scope: <code>[tool.slap.run]</code> or <code>[run]</code></p> Option Type Default Description <code>&lt;name&gt;</code> <code>str</code> n/a A command as a string to run with the system shell. An example configuration pyproject.toml<pre><code>[tool.slap.test]\ncheck = \"slap check\"\nmypy = \"mypy src/\"\npytest = \"pytest test/\"\n</code></pre> Example from the databind project  Databind is a mono-repository of three Python projects, two of which have tests set up. Running `slap test` in the project root folder runs all tests of all projects.  <pre><code>$ slap test\ndatabind.core:mypy| Success: no issues found in 8 source files\ndatabind.core:pytest| ================== test session starts ==================\ndatabind.core:pytest| platform linux -- Python 3.10.2, pytest-7.1.1, pluggy-1.0.0\ndatabind.core:pytest| rootdir: /home/niklas/git/databind/databind.core\ncollected 17 items\ndatabind.core:pytest|\ndatabind.core:pytest| test/test_context.py .                            [  5%]\ndatabind.core:pytest| test/test_schema.py ................              [100%]\ndatabind.core:pytest|\ndatabind.core:pytest| ================== 17 passed in 0.05s ===================\ndatabind.json:mypy| Success: no issues found in 5 source files\ndatabind.json:pytest| ================== test session starts ==================\ndatabind.json:pytest| platform linux -- Python 3.10.2, pytest-7.1.1, pluggy-1.0.0\ndatabind.json:pytest| rootdir: /home/niklas/git/databind/databind.json\ncollected 32 items\ndatabind.json:pytest|\ndatabind.json:pytest| test/test_converters.py ......................... [ 78%]\ndatabind.json:pytest| .......                                           [100%]\ndatabind.json:pytest|\ndatabind.json:pytest| ================== 32 passed in 0.11s ===================\n\ntest summary:\n  \u2022 databind.core:mypy (exit code: 0)\n  \u2022 databind.core:pytest (exit code: 0)\n  \u2022 databind.json:mypy (exit code: 0)\n  \u2022 databind.json:pytest (exit code: 0)\n</code></pre>"},{"location":"commands/test/#test-selection","title":"Test selection","text":"<ul> <li>If no <code>test</code> positional argument is specified, all tests in the project or projects of the repository will be run. (<code>$ slap test</code>)</li> <li>To run the tests of only one project while in a mono-repository folder, pass the project name as the <code>test</code> argument. (<code>$ slap test databind.core</code>)</li> <li>To run tests of the same name across all projects, pass the test name prefixed with a colon as the <code>test</code> argument. (<code>$ slap test :mypy</code>)</li> <li>To run only one particular test from a given project, pass the project name and test name separated by a colon as the   <code>test</code> argument. (<code>$ slap test databind.core:mypy</code>)</li> </ul>"},{"location":"commands/venv/","title":"<code>slap venv</code>","text":"<p>The <code>slap venv</code> command is a utility for managing virtual environments created using the standard library <code>venv</code> module in the current directory or globally (in <code>~/.local/venvs</code>).</p> <p>Slap keeps track of an \"active\" environment that is used activated by default by commands such as <code>slap install</code>, <code>slap link</code>, <code>slap run</code> and <code>slap test</code> before they perform their regular duties. This allows you to not have to actually activate a virtual environment while still operating within it while using Slap commands (similar to <code>poetry run</code>, etc.).</p> Synopsis <code>venv</code> <pre><code>@shell slap venv --help\n</code></pre> Synopsis <code>venv link</code> <pre><code>@shell slap venv link --help\n</code></pre>"},{"location":"commands/venv/#configuration","title":"Configuration","text":"<p>The <code>venv</code> command does not have any Slap configuration options. However, in order to use the <code>slap venv --activate</code> option properly, you need to configure your shell to shadow the <code>slap</code> command with a function such that it can source the activate script.</p> <p>To do this, run <code>$ slap venv -i &lt;shell&gt;</code> and add the output to your shell init scripts. Currently, the <code>-i</code> option only supports <code>bash</code> as an argument.</p> $ slap venv -i bash<pre><code>@shell slap venv -i bash\n</code></pre> <p>What will be evaluated in your init script then implements the shadow function:</p> $ SLAP_SHADOW=true slap venv -i bash<pre><code>@shell SLAP_SHADOW=true slap venv -i bash\n</code></pre> <p>Now you can enjoy using <code>slap venv -a [-g] [&lt;env&gt;]</code> to activate a virtual environment.</p>"},{"location":"commands/venv/#activate-behaviour","title":"Activate behaviour","text":"<p>Using <code>-a,--activate</code> without arguments will pick the most recently activated environment in the current context, or if that is not available, the one and only virtual environment. If multiple environments exist in that case, it is an error.</p>"},{"location":"guides/github/","title":"Using Slap in GitHub repositories","text":""},{"location":"guides/github/#github-actions","title":"GitHub Actions","text":"<p>Slap comes with a set of helpful GitHub actions that you can use in your workflows. These actions are available on the <code>NiklasRosenstein/slap</code> repository. The templates generated by <code>slap init -t github</code> make use of these actions to provide a good out-of-the-box experience.</p> <p>@shell slap init -t github --as-markdown -q</p> <p>These files demonstrate the usage of the GitHub actions.</p>"}]}